import{M as e}from"./index-CBkxY9s9.js";import{_ as t}from"./lodash-2VbGH-WW.js";import{d as a}from"./pinia-CgN6MZDh.js";import{_ as d}from"./role-tree-point.vue_vue_type_script_setup_true_lang-CHTmuPqC.js";import{d as n,b2 as i,b as r,o as c,F as h,b0 as s,ai as l,ag as u,ah as o,aR as m,c as p,bz as k,J as C,be as D,u as I}from"./@vue-BVvo-xZd.js";const f=a({id:"role",state:()=>({checkedData:[],treeMap:new Map}),actions:{initCheckedData(e){this.checkedData=[...new Set(e)]},addCheckedData(e){this.checkedData.some((t=>t===e))||this.checkedData.push(e)},addCheckedDataAndChildren(e){let t=this.checkedData.findIndex((t=>t===e.menuId));e.menuId&&-1===t&&this.addCheckedData(e.menuId),e.children&&e.children.forEach((e=>{this.addCheckedDataAndChildren(e)}))},deleteCheckedData(e){this.checkedData.splice(e,1)},deleteCheckedDataAndChildren(e){let t=this.checkedData.findIndex((t=>t===e.menuId));-1!==t&&this.deleteCheckedData(t),e.children&&e.children.forEach((e=>{this.deleteCheckedDataAndChildren(e)}))},initTreeMap(e){for(let a of e)a.menuId&&(this.treeMap.set(a.menuId,a),a.children&&!t.isEmpty(a.children)&&this.initTreeMap(a.children))},selectUpperLevel(e){let t=e.parentId;if(!t)return;let a=this.treeMap.get(t);if(!a)return;let d=this.checkedData.findIndex((e=>a.menuId===e));a.menuId&&-1===d&&this.addCheckedData(a.menuId),a.parentId&&this.selectUpperLevel(a)}}}),x={key:0},v=n({__name:"role-tree-menu",props:{tree:{type:Array,default:()=>[]},index:{type:Number,default:0}},emits:["update:value"],setup(t){const a=t;let n=f();function y(e){if(!e.menuId)return;-1===n.checkedData.indexOf(e.menuId)?(n.addCheckedDataAndChildren(e),n.selectUpperLevel(e),e.contextMenuId&&n.addCheckedData(e.contextMenuId)):n.deleteCheckedDataAndChildren(e)}return(t,n)=>{const f=i("a-checkbox");return c(!0),r(h,null,s(a.tree,(t=>(c(),r("li",{key:t.menuId},[l("div",{class:"menu",style:m({marginLeft:4*a.index+"%"})},[p(f,{onChange:e=>y(t),class:"checked-box-label",value:t.menuId},{default:k((()=>[C(D(t.menuName),1)])),_:2},1032,["onChange","value"]),t.children&&t.children.some((t=>t.menuType===I(e).POINTS.value))?(c(),r("div",x,[p(d,{tree:t.children,onSelectCheckbox:y},null,8,["tree"])])):o("",!0)],4),t.children&&!t.children.some((t=>t.menuType===I(e).POINTS.value))?(c(),u(v,{key:0,tree:t.children,index:a.index+1},null,8,["tree","index"])):o("",!0)])))),128)}}});export{v as _,f as u};
