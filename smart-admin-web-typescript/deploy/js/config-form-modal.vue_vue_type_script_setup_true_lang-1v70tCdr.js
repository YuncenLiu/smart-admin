import{d as e,r as a,a as o,b2 as n,ag as l,o as t,bz as i,c as s,u,y as r,ai as c,bt as f}from"./@vue-BVvo-xZd.js";import{b as d,p as g,S as m,s as p}from"./index-CBkxY9s9.js";import{b as y}from"./ant-design-vue-CcohkicM.js";const v={queryList:e=>g("/support/config/query",e),addConfig:e=>g("/support/config/add",e),updateConfig:e=>g("/support/config/update",e),queryByKey:e=>d(`/support/config/queryByKey?configKey=${e}`)},b=e({__name:"config-form-modal",emits:["reloadList"],setup(e,{expose:d,emit:g}){const b=g,h=a(),K={configId:void 0,configKey:"",configName:"",configValue:"",remark:""};let _=o({...K});const k={configKey:[{required:!0,message:"请输入参数key"}],configName:[{required:!0,message:"请输入参数名称"}],configValue:[{required:!0,message:"请输入参数值"}]},q=a(!1);function x(){Object.assign(_,K),q.value=!1}function j(){h.value.validate().then((async()=>{m.show();try{_.configId?await v.updateConfig(_):await v.addConfig(_),y.success((_.configId?"修改":"添加")+"成功"),b("reloadList"),x()}catch(e){p.captureError(e)}finally{m.hide()}})).catch((e=>{y.error("参数验证错误，请仔细填写表单数据!")}))}return d({showModal:function(e){Object.assign(_,K),e&&Object.assign(_,e),q.value=!0}}),(e,a)=>{const o=n("a-input"),d=n("a-form-item"),g=n("a-form"),m=n("a-modal");return t(),l(m,{open:q.value,title:u(_).configId?"编辑":"添加","ok-text":"确认","cancel-text":"取消",onOk:j,onCancel:x},{default:i((()=>[s(g,{ref_key:"formRef",ref:h,model:u(_),rules:k,"label-col":{span:5}},{default:i((()=>[s(d,{label:"参数Key",name:"configKey"},{default:i((()=>[s(o,{value:u(_).configKey,"onUpdate:value":a[0]||(a[0]=e=>u(_).configKey=e),placeholder:"请输入参数Key"},null,8,["value"])])),_:1}),s(d,{label:"参数名称",name:"configName"},{default:i((()=>[s(o,{value:u(_).configName,"onUpdate:value":a[1]||(a[1]=e=>u(_).configName=e),placeholder:"请输入参数名称"},null,8,["value"])])),_:1}),s(d,{label:"参数值",name:"configValue"},{default:i((()=>[s(o,{value:u(_).configValue,"onUpdate:value":a[2]||(a[2]=e=>u(_).configValue=e),placeholder:"请输入参数值"},null,8,["value"])])),_:1}),s(d,{label:"备注",name:"remark"},{default:i((()=>[r(c("textarea",{"onUpdate:modelValue":a[3]||(a[3]=e=>u(_).remark=e),style:{width:"100%",height:"100px",outline:"none"}},null,512),[[f,u(_).remark]])])),_:1})])),_:1},8,["model"])])),_:1},8,["open","title"])}}});export{b as _,v as c};
