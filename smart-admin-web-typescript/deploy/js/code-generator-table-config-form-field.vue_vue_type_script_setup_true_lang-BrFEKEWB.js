import{b as e,c as a,d as l,e as t,g as n,f as u}from"./code-generator-util-DVWycRGX.js";import{l as d}from"./index-CBkxY9s9.js";import{d as o,r as i,e as s,w as m,b2 as r,b as c,o as p,c as y,aR as v,bz as f,F as b,b0 as h,ag as N,J as g,be as x,i as I,ai as j,ah as w,u as T}from"./@vue-BVvo-xZd.js";import{a as _,b as k}from"./str-util-DvlP_5eO.js";import{_ as F}from"./lodash-2VbGH-WW.js";const C=o({__name:"index",props:{value:[Array,String],placeholder:{type:String,default:"请选择字典"},width:{type:String,default:"100%"},size:{type:String,default:"default"},disabled:{type:Number,default:null}},emits:["update:value","change"],setup(e,{expose:a,emit:l}){a({queryDict:u});const t=e,n=i([]);async function u(){let e=await d.getAllDict();n.value=e.data}s(u);const o=l,I=i(t.value);function j(e){o("update:value",e),o("change",e)}return m((()=>t.value),(e=>{I.value=e})),(a,l)=>{const u=r("a-select-option"),d=r("a-select");return p(),c("div",null,[y(d,{value:I.value,"onUpdate:value":l[0]||(l[0]=e=>I.value=e),style:v(`width: ${e.width}`),placeholder:t.placeholder,showSearch:!0,allowClear:!0,size:e.size,onChange:j,disabled:e.disabled},{default:f((()=>[(p(!0),c(b,null,h(n.value,(e=>(p(),N(u,{key:e.dictCode,value:e.dictCode},{default:f((()=>[g(x(e.dictName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","style","placeholder","size","disabled"])])}}}),U={style:{float:"right",padding:"10px 0"}},S={key:1},z=j("br",null,null,-1),K=o({__name:"code-generator-table-config-form-field",setup(d,{expose:o}){const s=i();function m(){s.value.queryDict()}const v=I("tableInfo"),K=i([{title:"列名",dataIndex:"columnName",width:120,ellipsis:!0},{title:"列描述",dataIndex:"columnComment",width:120,ellipsis:!0},{title:"列类型",dataIndex:"dataType",width:100,ellipsis:!0},{title:"非空",dataIndex:"nullableFlag",width:60},{title:"字段命名",dataIndex:"fieldName",width:150},{title:"字段名词",dataIndex:"label",width:150},{title:"Java类型",dataIndex:"javaType",width:150},{title:"前端类型",dataIndex:"jsType",width:130},{title:"字典",dataIndex:"dict",width:150},{title:"枚举",dataIndex:"enumName",width:150}]),D=i([]);function R(e,a){if(!e)return null;let l=e.filter((e=>e.columnName===a));return l&&l.length>0?l[0]:null}return o({setData:function(e,a){let d=[],o=a.basic,i=v.tableName;F.startsWith(v.tableName,"t_")&&(i=F.trim(i,"_t"));let s=o&&o.moduleName?o.moduleName:i;s=_(s);for(let m of e){let e=R(a.fields,m.columnName),o={columnName:m.columnName,columnComment:m.columnComment,dataType:m.dataType,nullableFlag:"NO"===m.isNullable,primaryKeyFlag:"PRI"===m.columnKey,autoIncreaseFlag:"auto_increment"===m.extra,fieldName:e?e.fieldName:k(m.columnName),label:e?e.label:m.columnComment,javaType:e?e.javaType:u(m.dataType),jsType:e?e.jsType:n(m.dataType),dict:e?e.dict:null,enumName:e?e.enumName:l(m.columnComment)?t(s,m.columnName):null};d.push(o)}D.value=d},getFieldsForm:function(){return D.value.map((e=>({columnName:e.columnName,columnComment:e.columnComment,label:e.label,fieldName:e.fieldName,javaType:e.javaType,jsType:e.jsType,dict:e.dict,enumName:e.enumName,primaryKeyFlag:e.primaryKeyFlag,autoIncreaseFlag:e.autoIncreaseFlag})))}}),(l,t)=>{const n=r("smile-outlined"),u=r("a-alert"),d=r("a-button"),o=r("a-tag"),i=r("a-input"),v=r("a-select-option"),I=r("a-select"),_=r("a-table");return p(),c(b,null,[y(u,{closable:!0,message:"请务必将每一个字段的 “ 字段名词 ” 填写完整！！！",type:"success","show-icon":""},{icon:f((()=>[y(n)])),_:1}),j("div",U,[y(d,{type:"primary",onClick:m},{default:f((()=>[g("刷新字典")])),_:1})]),y(_,{scroll:{x:1300},size:"small",bordered:"",class:"smart-margin-top10",dataSource:D.value,columns:K.value,rowKey:"columnName",pagination:!1},{bodyCell:f((({text:l,record:t,index:n,column:u})=>["no"===u.dataIndex?(p(),c(b,{key:0},[g(x(n+1),1)],64)):w("",!0),"columnName"===u.dataIndex?(p(),c("span",S,[t.primaryKeyFlag?(p(),N(o,{key:0,color:"#f50",style:{"line-height":"12px"}},{default:f((()=>[g("主键")])),_:1})):w("",!0),t.autoIncreaseFlag?(p(),N(o,{key:1,color:"#f50",style:{"line-height":"12px"}},{default:f((()=>[g("自增")])),_:1})):w("",!0),z,g(" "+x(l),1)])):w("",!0),"nullableFlag"===u.dataIndex?(p(),c(b,{key:2},[l?(p(),N(o,{key:0,color:"error"},{default:f((()=>[g("非空")])),_:1})):w("",!0)],64)):w("",!0),"fieldName"===u.dataIndex?(p(),N(i,{key:3,value:t.fieldName,"onUpdate:value":e=>t.fieldName=e},null,8,["value","onUpdate:value"])):w("",!0),"label"===u.dataIndex?(p(),N(i,{key:4,value:t.label,"onUpdate:value":e=>t.label=e},null,8,["value","onUpdate:value"])):w("",!0),"javaType"===u.dataIndex?(p(),N(I,{key:5,value:t.javaType,"onUpdate:value":e=>t.javaType=e,style:{width:"100%"}},{default:f((()=>[(p(!0),c(b,null,h(T(e),(e=>(p(),N(v,{value:e,key:e},{default:f((()=>[g(x(e),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])):w("",!0),"jsType"===u.dataIndex?(p(),N(I,{key:6,value:t.jsType,"onUpdate:value":e=>t.jsType=e,style:{width:"100%"}},{default:f((()=>[(p(!0),c(b,null,h(T(a),(e=>(p(),N(v,{value:e,key:e},{default:f((()=>[g(x(e),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])):w("",!0),"dict"===u.dataIndex?(p(),N(C,{key:7,ref_key:"dictRef",ref:s,value:t.dict,"onUpdate:value":e=>t.dict=e},null,8,["value","onUpdate:value"])):w("",!0),"enumName"===u.dataIndex?(p(),N(i,{key:8,value:t.enumName,"onUpdate:value":e=>t.enumName=e},null,8,["value","onUpdate:value"])):w("",!0)])),_:1},8,["dataSource","columns"])],64)}}});export{K as _};
