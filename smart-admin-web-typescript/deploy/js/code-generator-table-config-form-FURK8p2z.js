import{S as e,s as t,a}from"./index-CBkxY9s9.js";import r from"./code-generator-table-config-form-basic-C1UIKFw2.js";import{c as l}from"./code-generator-api-C59wnQS_.js";import{_ as o}from"./code-generator-table-config-form-field.vue_vue_type_script_setup_true_lang-BrFEKEWB.js";import s from"./code-generator-table-config-form-insert-and-update-CzyLwlnO.js";import i from"./code-generator-table-config-form-delete-CZYWxhV2.js";import{_ as n}from"./code-generator-table-config-form-query-field.vue_vue_type_script_setup_true_lang-leOfwisX.js";import{_ as u}from"./code-generator-table-config-form-table-field.vue_vue_type_script_setup_true_lang-BygQ61qa.js";import{b as d}from"./ant-design-vue-CcohkicM.js";import{d as f,r as m,a as p,b2 as c,ag as v,o as _,bz as b,c as j,ai as y,J as g,n as F,p as k}from"./@vue-BVvo-xZd.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./lodash-2VbGH-WW.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./dayjs-B6vKC6dp.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./str-util-DvlP_5eO.js";import"./code-generator-util-DVWycRGX.js";import"./index.vue_vue_type_script_setup_true_lang-D394UfoC.js";import"./sortablejs-CRp0PNdb.js";const h=a(f({__name:"code-generator-table-config-form",emits:["reloadList"],setup(a,{expose:f,emit:h}){const w=m(!1);function C(){w.value=!1}const R=m(),x=m(),D=m(),N=m(),A=m(),T=m(),q=m([]),z=m({});const E=p({tableName:"",tableComment:"",createTime:"",updateTime:""}),I=m("1"),K=h;async function U(){e.show();try{let e=await R.value.validateForm(),t=await D.value.validateForm(),a=await N.value.validateForm();if(!e||!t||!a)return;let r=x.value.getFieldsForm(),o=R.value.getBasicForm(),s=D.value.getFieldsForm(),i=N.value.getForm(),n=A.value.getFieldsForm(),u=T.value.getTaleFieldsForm();await l.updateConfig({tableName:E.tableName,basic:o,fields:r,insertAndUpdate:s,deleteInfo:i,queryFields:n,tableFields:u}),d.success("保存成功"),K("reloadList"),C()}catch(a){t.captureError(a)}finally{e.hide()}}return f({showModal:function(a){Object.assign(E,a),I.value="1",w.value=!0,F((()=>{!async function(){try{e.show();let t=await l.getTableColumns(E.tableName);q.value=t.data;let a=await l.getConfig(E.tableName);z.value=a.data,R.value.setData(z.value),x.value.setData(q.value,z.value),D.value.setData(q.value,z.value),N.value.setData(q.value,z.value),A.value.setData(q.value,z.value),T.value.setData(q.value,z.value)}catch(a){t.captureError(a)}finally{e.hide()}}()}))}}),k("tableInfo",E),k("tableColumns",q),k("tableConfig",z),(e,t)=>{const a=c("info-circle-outlined"),l=c("a-tab-pane"),d=c("unordered-list-outlined"),f=c("save-outlined"),m=c("delete-outlined"),p=c("file-search-outlined"),F=c("table-outlined"),k=c("a-tabs"),h=c("a-button"),q=c("a-space"),z=c("a-drawer");return _(),v(z,{title:"代码配置",style:{},open:w.value,width:1200,footerStyle:{textAlign:"right"},onClose:C,maskClosable:!1,destroyOnClose:!0},{footer:b((()=>[j(q,null,{default:b((()=>[j(h,{onClick:C},{default:b((()=>[g("取消")])),_:1}),j(h,{type:"primary",onClick:U},{default:b((()=>[g("保存")])),_:1})])),_:1})])),default:b((()=>[j(k,{activeKey:I.value,"onUpdate:activeKey":t[0]||(t[0]=e=>I.value=e)},{default:b((()=>[j(l,{key:"1",forceRender:!0},{tab:b((()=>[y("span",null,[j(a),g(" 1.基础命名 ")])])),default:b((()=>[j(r,{ref_key:"basicRef",ref:R},null,512)])),_:1}),j(l,{key:"2",forceRender:!0},{tab:b((()=>[y("span",null,[j(d),g(" 2.字段列表 ")])])),default:b((()=>[j(o,{ref_key:"fieldRef",ref:x},null,512)])),_:1}),j(l,{key:"3",forceRender:!0},{tab:b((()=>[y("span",null,[j(f),g(" 3.增加、修改 ")])])),default:b((()=>[j(s,{ref_key:"insertAndUpdateRef",ref:D},null,512)])),_:1}),j(l,{key:"4",forceRender:!0},{tab:b((()=>[y("span",null,[j(m),g(" 4.删除 ")])])),default:b((()=>[j(i,{ref_key:"deleteRef",ref:N},null,512)])),_:1}),j(l,{key:"5",forceRender:!0},{tab:b((()=>[y("span",null,[j(p),g(" 5、查询条件 ")])])),default:b((()=>[j(n,{ref_key:"queryRef",ref:A},null,512)])),_:1}),j(l,{key:"6",forceRender:!0},{tab:b((()=>[y("span",null,[j(F),g(" 6、列表 ")])])),default:b((()=>[j(u,{ref_key:"tableFieldRef",ref:T},null,512)])),_:1})])),_:1},8,["activeKey"])])),_:1},8,["open"])}}}),[["__scopeId","data-v-c2bc9f83"]]);export{h as default};
