import{c as e,r as a,s as t,P as s}from"./index-CBkxY9s9.js";import{d as i}from"./default-time-ranges-JqpEQ5s5.js";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang-dcAvOOdY.js";import{d as o,a as l,r as n,e as u,b2 as d,z as p,b as m,o as c,c as f,bz as g,u as j,y,ag as v,J as h,ai as b,ah as _,be as z,F as w}from"./@vue-BVvo-xZd.js";import"./ant-design-vue-CcohkicM.js";import"./@babel-rSvM8Ko2.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./dayjs-B6vKC6dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./lodash-2VbGH-WW.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";const x={key:1},S={class:"smart-query-table-page"},k=o({__name:"feedback-list",setup(o){const k=l([{title:"编号",dataIndex:"feedbackId",width:80},{title:"反馈内容",dataIndex:"feedbackContent"},{title:"反馈图片",dataIndex:"feedbackAttachment"},{title:"反馈人",dataIndex:"userName",width:100},{title:"反馈人类型",dataIndex:"userType",width:100},{title:"反馈时间",dataIndex:"createTime",width:150}]),I={startDate:void 0,endDate:void 0,searchWord:void 0,pageNum:1,pageSize:e},C=l({...I}),q=n(!1),D=n([]),E=n(0);async function N(){try{q.value=!0;const e=await a.queryFeedback(C);D.value=e.data.list,E.value=e.data.total}catch(e){t.captureError(e)}finally{q.value=!1}}u((()=>{N()}));const P=n([]);function U(e,a){C.startDate=a[0],C.endDate=a[1]}function O(){C.pageNum=1,N()}function Y(){Object.assign(C,I),P.value=[],N()}return(e,a)=>{const t=d("a-input"),o=d("a-form-item"),l=d("a-range-picker"),n=d("SearchOutlined"),u=d("a-button"),I=d("ReloadOutlined"),M=d("a-button-group"),T=d("a-row"),W=d("a-form"),A=d("a-table"),F=d("a-pagination"),J=d("a-card"),L=p("privilege");return c(),m(w,null,[f(W,{class:"smart-query-form"},{default:g((()=>[f(T,{class:"smart-query-form-row"},{default:g((()=>[f(o,{label:"关键字",class:"smart-query-form-item",style:{"margin-right":"20px"}},{default:g((()=>[f(t,{style:{width:"240px"},value:C.searchWord,"onUpdate:value":a[0]||(a[0]=e=>C.searchWord=e),valueModifiers:{trim:!0},placeholder:"反馈内容/创建人"},null,8,["value"])])),_:1}),f(o,{label:"创建日期",class:"smart-query-form-item",style:{"margin-right":"20px"}},{default:g((()=>[f(l,{value:P.value,"onUpdate:value":a[1]||(a[1]=e=>P.value=e),onChange:U,presets:j(i),format:"YYYY-MM-DD",style:{width:"240px"}},null,8,["value","presets"])])),_:1}),f(o,{class:"smart-query-form-item"},{default:g((()=>[y((c(),v(M,null,{default:g((()=>[f(u,{type:"primary",onClick:O},{icon:g((()=>[f(n)])),default:g((()=>[h(" 查询 ")])),_:1}),f(u,{onClick:Y},{icon:g((()=>[f(I)])),default:g((()=>[h(" 重置 ")])),_:1})])),_:1})),[[L,"feedback:query"]])])),_:1})])),_:1})])),_:1}),f(J,{size:"small"},{default:g((()=>[f(A,{rowKey:"feedbackId",dataSource:D.value,columns:k,pagination:!1,loading:q.value,size:"small",bordered:""},{bodyCell:g((({text:a,column:t})=>["feedbackAttachment"===t.dataIndex?(c(),v(r,{key:0,fileList:a,type:"picture"},null,8,["fileList"])):_("",!0),"userType"===t.dataIndex?(c(),m("span",x,z(e.$smartEnumPlugin.getDescByValue("USER_TYPE_ENUM",a)),1)):_("",!0)])),_:1},8,["dataSource","columns","loading"]),b("div",S,[f(F,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:j(s),defaultPageSize:C.pageSize,current:C.pageNum,"onUpdate:current":a[2]||(a[2]=e=>C.pageNum=e),pageSize:C.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>C.pageSize=e),total:E.value,onChange:N,onShowSizeChange:N,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])])])),_:1})],64)}}});export{k as default};
