import{_ as e}from"./lodash-2VbGH-WW.js";import{s as t,N as s,a}from"./index-CBkxY9s9.js";import{d as i}from"./department-api-Dth9G_6l.js";import{d as r,r as o,m as l,w as n,e as d,b2 as m,b as p,o as c,ai as u,c as v,bz as j,aP as y,be as f,F as b,b0 as h}from"./@vue-BVvo-xZd.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./ant-design-vue-CcohkicM.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./dayjs-B6vKC6dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";const w={class:"wrapper"},I={class:"sider-fl"},k={class:"list-item-title"},C={class:"sider-fr"},g={class:"selected-list"},x={class:"list-item-title"},E=a(r({__name:"notice-form-visible-transfer-department",props:{departmentList:{type:Array,default:()=>[]}},emits:["onChange"],setup(a,{emit:r}){const E=a,N=r,_=o([]);async function T(){try{const t=await i.queryDepartmentTree();e.isEmpty(t.data)||(_.value=t.data,z.value=[_.value[0].departmentId])}catch(s){t.captureError(s)}}const z=o([]);const D=o([]),K=l((()=>D.value.map((e=>e.dataId))));function L(e){return K.value.includes(e)}function A(){N("onChange",{selectedList:D.value,selectedIds:K.value})}return n((()=>E.departmentList),(e=>{D.value=e}),{immediate:!0}),d((()=>{T()})),(e,t)=>{const a=m("caret-down-outlined"),i=m("check-circle-filled"),r=m("a-tree"),o=m("close-circle-two-tone");return c(),p("div",w,[u("div",I,[v(r,{"tree-data":_.value,fieldNames:{title:"name",key:"departmentId"},selectable:!1,expandedKeys:z.value,"onUpdate:expandedKeys":t[0]||(t[0]=e=>z.value=e)},{switcherIcon:j((({switcherCls:e})=>[v(a,{class:y(e)},null,8,["class"])])),title:j((({name:e,departmentId:t})=>[u("div",{class:y(["list-item",{active:L(t)}])},[u("div",k,f(e),1),v(i,{class:"check-icon-style",onClick:a=>function(e,t){L(t)||(D.value.push({dataName:e,dataId:t,dataType:s.DEPARTMENT.value}),A())}(e,t)},null,8,["onClick"])],2)])),_:1},8,["tree-data","expandedKeys"])]),u("div",C,[u("div",g,[(c(!0),p(b,null,h(D.value,((e,t)=>(c(),p("div",{class:"list-item",key:e.dataId},[u("div",x,f(e.dataName),1),v(o,{onClick:e=>function(e){D.value.splice(e,1),A()}(t)},null,8,["onClick"])])))),128))])])])}}}),[["__scopeId","data-v-8efb0c62"]]);export{E as default};
