import{u as a}from"./vue-router-D-yLC68c.js";import{V as e,S as s,h as t,B as l,R as o,O as i,A as r,l as c,u as n,W as d,s as p,I as u,J as m,a as v}from"./index-CBkxY9s9.js";import{l as b,w as f,a as g,d as h,q as y,b as j,f as w,g as k}from"./google-icon-BXU_orIT.js";import{c as C,B as _,b as x}from"./ant-design-vue-CcohkicM.js";import{d as q,a as S,r as U,e as I,h as z,l as E,b2 as N,b as A,o as D,ai as L,ao as V,u as B,c as T,bz as J,ag as M,ah as O,J as R,be as F,aY as K,aW as P}from"./@vue-BVvo-xZd.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./lodash-2VbGH-WW.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./dayjs-B6vKC6dp.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const W=a=>(K("data-v-ef2193bb"),a=a(),P(),a),$={class:"login-container"},Y={class:"box-item desc"},G=V('<div class="welcome" data-v-ef2193bb><p data-v-ef2193bb>欢迎登录 SmartAdmin V3</p><p class="desc" data-v-ef2193bb> SmartAdmin 是由 河南·洛阳 <a target="_blank" href="https://www.1024lab.net" style="color:white;weight:bolder;font-size:15px;text-decoration:underline;" data-v-ef2193bb>1024创新实验室（1024Lab）</a> 基于SpringBoot + Sa-Token + Mybatis-Plus 和 Vue3 + Vite5 + Ant Design Vue 4 (同时支持JavaScript和TypeScript双版本) 以「高质量代码」为核心，「简洁、高效、安全」的快速开发平台。 <br data-v-ef2193bb><br data-v-ef2193bb><span class="setence" data-v-ef2193bb> 致伟大的开发者 ： <br data-v-ef2193bb>     我们希望用一套漂亮优雅的代码和一套整洁高效的代码规范，让大家在这浮躁的世界里感受到一股把代码写好的清流 ! <br data-v-ef2193bb> 保持谦逊，保持学习，热爱代码，更热爱生活 !<br data-v-ef2193bb> 永远年轻，永远前行 !<br data-v-ef2193bb><span class="author" data-v-ef2193bb><a target="_blank" href="https://zhuoda.vip" style="color:white;font-size:13px;text-decoration:underline;" data-v-ef2193bb> 1024创新实验室-主任：卓大 </a></span></span></p></div>',1),H={class:"app-qr-box"},Q={class:"app-qr"},X=["src"],Z=W((()=>L("span",{class:"qr-desc"}," 加微信，骚扰卓大 :) ",-1))),aa={class:"app-qr"},ea=["src"],sa=W((()=>L("div",{class:"qr-desc-marquee"},[L("div",{class:"marquee"},[L("span",null,"关注：六边形工程师，分享：赚钱、代码、生活")])],-1))),ta={class:"box-item login"},la=["src"],oa=W((()=>L("div",{class:"login-title"},"账号登录",-1))),ia=["src"],ra=W((()=>L("span",null," ( 账号：admin, 密码：123456)",-1))),ca={class:"more"},na=W((()=>L("div",{class:"title-box"},[L("p",{class:"line"}),L("p",{class:"title"},"其他方式登录"),L("p",{class:"line"})],-1))),da={class:"login-type"},pa=["src"],ua=["src"],ma=["src"],va=["src"],ba=["src"],fa=["src"],ga=["src"],ha=v(q({__name:"login",setup(v){const q=S({loginName:"admin",password:"",captchaCode:"",captchaUuid:"",loginDevice:e.PC.value}),V={loginName:[{required:!0,message:"用户名不能为空"}],password:[{required:!0,message:"密码不能为空"}],captchaCode:[{required:!0,message:"验证码不能为空"}]},K=U(!1),P=a(),W=U(),ha=U(!1);async function ya(){W.value.validate().then((async()=>{try{s.show();let a=Object.assign({},q,{password:t(q.password)});const e=await l.login(a);null!=ka&&(clearInterval(ka),ka=null),o(i.USER_TOKEN,e.data.token?e.data.token:""),x.success("登录成功"),r().setUserLoginInfo(e.data);const p=await c.getAllDictData();n().initData(p.data),d(),P.push("/home")}catch(a){a.data&&0!==a.data.code&&(q.captchaCode="",wa()),p.captureError(a)}finally{s.hide()}}))}I((()=>{document.onkeyup=a=>{13===a.keyCode&&ya()},C.success({message:"温馨提示",description:"SmartAdmin 提供 9种 登录背景风格哦！",duration:8,onClick:()=>{},btn:()=>z(_,{type:"primary",target:"_blank",size:"small",href:"https://smartadmin.vip/views/doc/front/Login.html",onClick:()=>{}},{default:()=>"去看看"})})})),E((()=>{document.onkeyup=null}));const ja=U("");async function wa(){try{let e=await l.getCaptcha();ja.value=e.data.captchaBase64Image,q.captchaUuid=e.data.captchaUuid,a=e.data.expireSeconds,null===ka&&(ka=setInterval(wa,1e3*(a-5)))}catch(e){}var a}let ka=null;I((()=>{wa(),async function(){try{let a=await l.getTwoFactorLoginFlag();Ca.value=a.data}catch(a){p.captureError(a)}}()}));const Ca=U(!1);let _a=U("获取邮箱验证码"),xa=U(!1),qa=null;async function Sa(){try{s.show();await l.sendLoginEmailCode(q.loginName);x.success("验证码发送成功!请登录邮箱查看验证码~"),function(){xa.value=!0;let a=60;_a.value=`${a}秒后重新获取`,qa=setInterval((()=>{a>1?(a--,_a.value=`${a}秒后重新获取`):(clearInterval(qa),xa.value=!1,_a.value="获取验证码")}),1e3)}()}catch(a){p.captureError(a)}finally{s.hide()}}return(a,e)=>{const s=N("a-input"),t=N("a-form-item"),l=N("a-button"),o=N("a-input-group"),i=N("a-input-password"),r=N("a-checkbox"),c=N("a-form");return D(),A("div",$,[L("div",Y,[G,L("div",H,[L("div",Q,[L("img",{src:B(u)},null,8,X),Z]),L("div",aa,[L("img",{src:B(m)},null,8,ea),sa])])]),L("div",ta,[L("img",{class:"login-qr",src:B(b)},null,8,la),oa,T(c,{ref_key:"formRef",ref:W,class:"login-form",model:q,rules:V},{default:J((()=>[T(t,{name:"loginName"},{default:J((()=>[T(s,{value:q.loginName,"onUpdate:value":e[0]||(e[0]=a=>q.loginName=a),valueModifiers:{trim:!0},placeholder:"请输入用户名"},null,8,["value"])])),_:1}),Ca.value?(D(),M(t,{key:0,name:"emailCode"},{default:J((()=>[T(o,{compact:""},{default:J((()=>[T(s,{style:{width:"calc(100% - 110px)"},value:q.emailCode,"onUpdate:value":e[1]||(e[1]=a=>q.emailCode=a),autocomplete:"on",placeholder:"请输入邮箱验证码"},null,8,["value"]),T(l,{onClick:Sa,class:"code-btn",type:"primary",disabled:B(xa)},{default:J((()=>[R(F(B(_a)),1)])),_:1},8,["disabled"])])),_:1})])),_:1})):O("",!0),T(t,{name:"password"},{default:J((()=>[T(i,{value:q.password,"onUpdate:value":e[2]||(e[2]=a=>q.password=a),autocomplete:"on",type:K.value?"text":"password",placeholder:"请输入密码"},null,8,["value","type"])])),_:1}),T(t,{name:"captchaCode"},{default:J((()=>[T(s,{class:"captcha-input",value:q.captchaCode,"onUpdate:value":e[3]||(e[3]=a=>q.captchaCode=a),valueModifiers:{trim:!0},placeholder:"请输入验证码"},null,8,["value"]),L("img",{class:"captcha-img",src:ja.value,onClick:wa},null,8,ia)])),_:1}),T(t,null,{default:J((()=>[T(r,{checked:ha.value,"onUpdate:checked":e[4]||(e[4]=a=>ha.value=a)},{default:J((()=>[R("记住密码")])),_:1},8,["checked"]),ra])),_:1}),T(t,null,{default:J((()=>[L("div",{class:"btn",onClick:ya},"登录")])),_:1})])),_:1},8,["model"]),L("div",ca,[na,L("div",da,[L("img",{src:B(f)},null,8,pa),L("img",{src:B(g)},null,8,ua),L("img",{src:B(h)},null,8,ma),L("img",{src:B(y)},null,8,va),L("img",{src:B(j)},null,8,ba),L("img",{src:B(w)},null,8,fa),L("img",{src:B(k)},null,8,ga)])])])])}}}),[["__scopeId","data-v-ef2193bb"]]);export{ha as default};
