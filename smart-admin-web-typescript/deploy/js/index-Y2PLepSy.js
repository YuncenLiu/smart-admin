import{_ as e}from"./lodash-2VbGH-WW.js";import t from"./role-tree-checkbox-CUcaRsin.js";import{p as s,b as r,S as a,s as i,a as o}from"./index-CBkxY9s9.js";import{u as p}from"./role-tree-menu.vue_vue_type_script_setup_true_lang-4NTlb0NV.js";import{b as m}from"./ant-design-vue-CcohkicM.js";import{d as u,r as n,i as l,w as j,b2 as d,z as c,b as v,o as y,ai as f,c as _,y as b,ah as h,u as g,ag as x,bz as w,J as k,aY as I,aW as M}from"./@vue-BVvo-xZd.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./dayjs-B6vKC6dp.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./role-tree-point.vue_vue_type_script_setup_true_lang-CHTmuPqC.js";const z=e=>r(`role/menu/getRoleSelectedMenu/${e}`),E=e=>s("role/menu/updateRoleMenu",e),C={class:"tree-header"},D=(e=>(I("data-v-5e85ff78"),e=e(),M(),e))((()=>f("p",null,"设置角色对应的功能操作、后台管理权限",-1))),L=o(u({__name:"index",setup(s){let r=p(),o=n(),u=l("selectRoleId");async function I(){let t=r.checkedData;if(e.isEmpty(t))return void m.error("还未选择任何权限");let s={roleId:u.value,menuIdList:t};a.show();try{await E(s),m.success("保存成功")}catch(o){i.captureError(o)}finally{a.hide()}}return j(u,(()=>async function(){if(!u.value)return;let t=(await z(u.value)).data;e.isEmpty(r.treeMap)&&r.initTreeMap(t.menuTreeList||[]);r.initCheckedData(t.selectedMenuId||[]),o.value=t.menuTreeList}()),{immediate:!0}),(e,s)=>{const r=d("a-button"),a=c("privilege");return y(),v("div",null,[f("div",C,[D,g(u)?b((y(),x(r,{key:0,type:"primary",onClick:I},{default:w((()=>[k(" 保存 ")])),_:1})),[[a,"system:role:menu:update"]]):h("",!0)]),_(t,{tree:g(o)},null,8,["tree"])])}}}),[["__scopeId","data-v-5e85ff78"]]);export{L as default};
