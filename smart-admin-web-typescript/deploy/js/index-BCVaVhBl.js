import{L as e,P as a,s as t}from"./index-CBkxY9s9.js";import{d as s}from"./default-time-ranges-JqpEQ5s5.js";import{u as o}from"./ua-parser-js-DNXwZhEt.js";import{l as i,c as r}from"./table-auto-height-BruH4Q9h.js";import{d as l,r as n,a as u,e as d,l as p,b2 as m,b as c,o as g,c as f,ai as v,bz as j,u as y,J as h,ah as w,F as b,ag as S,be as z}from"./@vue-BVvo-xZd.js";import"./ant-design-vue-CcohkicM.js";import"./@babel-rSvM8Ko2.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./dayjs-B6vKC6dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./lodash-2VbGH-WW.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";const I={key:1},_={class:"smart-query-table-page"},x=l({__name:"index",setup(l){const x=n([{title:"时间",dataIndex:"createTime",width:150},{title:"登录方式",dataIndex:"remark",ellipsis:!0,width:90},{title:"登录设备",dataIndex:"userAgent",ellipsis:!0},{title:"IP地区",dataIndex:"loginIpRegion",ellipsis:!0},{title:"IP",dataIndex:"loginIp",ellipsis:!0,width:120},{title:"结果",dataIndex:"loginResult",ellipsis:!0,width:90}]),k={userName:"",ip:"",startDate:void 0,endDate:void 0,pageNum:1,pageSize:10},C=u({...k}),L=n([]),O=s;function N(e,a){C.startDate=a[0],C.endDate=a[1]}const q=n(!1),P=n([]),A=n(0);function D(){Object.assign(C,k),L.value=[],R()}function E(){C.pageNum=1,R()}async function R(){try{q.value=!0;let e=await i.queryListLogin(C);for(const t of e.data.list){if(!t.userAgent)continue;let e=o(t.userAgent);t.browser=e.browser.name,t.os=e.os.name,t.device=e.device.vendor?e.device.vendor+e.device.model:""}const a=e.data.list;A.value=e.data.total,P.value=a}catch(e){t.captureError(e)}finally{q.value=!1}}const U=n(100),F=n();function G(){r(U,[F],10)}return window.addEventListener("resize",G),d((()=>{R(),G()})),p((()=>{window.removeEventListener("resize",G)})),(t,s)=>{const o=m("a-range-picker"),i=m("a-form-item"),r=m("SearchOutlined"),l=m("a-button"),n=m("ReloadOutlined"),u=m("a-button-group"),d=m("a-row"),p=m("a-form"),k=m("a-tag"),U=m("a-table"),G=m("a-pagination");return g(),c(b,null,[f(p,{class:"smart-query-form",ref_key:"queryFormRef",ref:F},{default:j((()=>[f(d,{class:"smart-query-form-row"},{default:j((()=>[f(i,{label:"时间",class:"smart-query-form-item"},{default:j((()=>[f(o,{onChange:N,value:L.value,"onUpdate:value":s[0]||(s[0]=e=>L.value=e),presets:y(O),style:{width:"240px"}},null,8,["value","presets"])])),_:1}),f(i,{class:"smart-query-form-item smart-margin-left10"},{default:j((()=>[f(u,null,{default:j((()=>[f(l,{type:"primary",onClick:E},{icon:j((()=>[f(r)])),default:j((()=>[h(" 查询 ")])),_:1}),f(l,{onClick:D},{icon:j((()=>[f(n)])),default:j((()=>[h(" 重置 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),f(U,{size:"small",dataSource:P.value,columns:x.value,bordered:"",rowKey:"loginLogId",pagination:!1,loading:q.value},{bodyCell:j((({text:a,record:t,column:s})=>["loginResult"===s.dataIndex?(g(),c(b,{key:0},[a===y(e).LOGIN_SUCCESS.value?(g(),S(k,{key:0,color:"success"},{default:j((()=>[h("登录成功")])),_:1})):w("",!0),a===y(e).LOGIN_FAIL.value?(g(),S(k,{key:1,color:"error"},{default:j((()=>[h("登录失败")])),_:1})):w("",!0),a===y(e).LOGIN_OUT.value?(g(),S(k,{key:2,color:"processing"},{default:j((()=>[h("退出登录")])),_:1})):w("",!0)],64)):w("",!0),"userAgent"===s.dataIndex?(g(),c("div",I,z(t.browser)+" / "+z(t.os)+" / "+z(t.device),1)):w("",!0)])),_:1},8,["dataSource","columns","loading"]),v("div",_,[f(G,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:y(a),defaultPageSize:C.pageSize,current:C.pageNum,"onUpdate:current":s[1]||(s[1]=e=>C.pageNum=e),pageSize:C.pageSize,"onUpdate:pageSize":s[2]||(s[2]=e=>C.pageSize=e),total:A.value,onChange:R,onShowSizeChange:R,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])])],64)}}});export{x as default};
