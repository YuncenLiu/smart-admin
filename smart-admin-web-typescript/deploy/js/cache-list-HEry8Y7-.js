import{b as a,s as e,S as t}from"./index-CBkxY9s9.js";import{_ as s}from"./lodash-2VbGH-WW.js";import{b as r,M as o}from"./ant-design-vue-CcohkicM.js";import{d as i,a as n,r as c,e as p,b2 as l,z as m,ag as d,o as u,bz as j,c as y,ai as f,b as h,ah as v,y as b,J as k,h as g}from"./@vue-BVvo-xZd.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./dayjs-B6vKC6dp.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const C=e=>a(`/support/cache/keys/${e}`),w=e=>a(`/support/cache/remove/${e}`),x=()=>a("/support/cache/names"),S=f("h4",null,"缓存 介绍：",-1),_=f("pre",null,"简介：SmartAdmin使用的是SpringCache进行管理缓存，SpringCache有多种实现方式，本项目默认采用的是caffeine。\nCaffeine ：\n- Caffeine是一个进程内部缓存框架，使用了Java 8最新的[StampedLock]乐观锁技术，极大提高缓存并发吞吐量，一个高性能的 Java 缓存库，被称为最快缓存。\n其他：\n· 对于分布式、集群等应用实现方式可以改为 Redis、CouchBase等\n",-1),z={key:0,class:"smart-table-operate"},E=i({__name:"cache-list",setup(a){const i=n([{title:"Key",dataIndex:"key"},{title:"操作",dataIndex:"action",fixed:"right",width:160}]),f=c(!1),E=c([]);async function I(){try{f.value=!0;let a=await x();E.value=a.data.map((a=>Object.assign({},{key:a})))}catch(a){e.captureError(a)}finally{f.value=!1}}return p(I),(a,n)=>{const c=l("a-alert"),p=l("a-button"),f=l("a-table"),x=l("a-card"),J=m("privilege");return u(),d(x,{size:"small",bordered:!1,hoverable:!0},{default:j((()=>[y(c,null,{message:j((()=>[S])),description:j((()=>[_])),_:1}),y(f,{size:"small",bordered:"",class:"smart-margin-top10",dataSource:E.value,columns:i,rowKey:"tag",pagination:!1},{bodyCell:j((({record:a,column:i})=>["action"===i.dataIndex?(u(),h("div",z,[b((u(),d(p,{onClick:t=>async function(a){try{await w(a),r.success("删除成功"),I()}catch(t){e.captureError(t)}}(a.key),type:"link"},{default:j((()=>[k("清除")])),_:2},1032,["onClick"])),[[J,"support:cache:delete"]]),b((u(),d(p,{onClick:r=>async function(a){t.show();try{let e=await C(a);t.hide(),o.info({title:"所有Key:"+a,content:g("div",{},[g("p",s.join(e.data," , "))]),onOk(){I()}})}catch(r){e.captureError(r)}finally{t.hide()}}(a.key),type:"link"},{default:j((()=>[k("获取所有key")])),_:2},1032,["onClick"])),[[J,"support:cache:keys"]])])):v("",!0)])),_:1},8,["dataSource","columns"])])),_:1})}}});export{E as default};
