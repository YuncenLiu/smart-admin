import{c as e}from"./code-generator-api-C59wnQS_.js";import{P as t,s as a}from"./index-CBkxY9s9.js";import o from"./code-generator-table-config-form-FURK8p2z.js";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang-CtW6JKpO.js";import{T as i}from"./table-id-const-DES3cCFe.js";import s from"./code-generator-preview-modal-DKvZ7DmW.js";import{d as l,r as n,a as d,e as u,b2 as m,b as p,o as c,c as f,bz as g,J as j,ai as v,u as _,ah as b,F as y,be as h}from"./@vue-BVvo-xZd.js";import"./ant-design-vue-CcohkicM.js";import"./@babel-rSvM8Ko2.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./dayjs-B6vKC6dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./lodash-2VbGH-WW.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";import"./code-generator-table-config-form-basic-C1UIKFw2.js";import"./str-util-DvlP_5eO.js";import"./code-generator-table-config-form-field.vue_vue_type_script_setup_true_lang-BrFEKEWB.js";import"./code-generator-util-DVWycRGX.js";import"./code-generator-table-config-form-insert-and-update-CzyLwlnO.js";import"./index.vue_vue_type_script_setup_true_lang-D394UfoC.js";import"./code-generator-table-config-form-delete-CZYWxhV2.js";import"./code-generator-table-config-form-query-field.vue_vue_type_script_setup_true_lang-leOfwisX.js";import"./sortablejs-CRp0PNdb.js";import"./code-generator-table-config-form-table-field.vue_vue_type_script_setup_true_lang-BygQ61qa.js";import"./highlight.js-D2tfmK9n.js";const w={key:1,class:"smart-table-operate"},x={class:"smart-query-table-page"},z=l({__name:"code-generator-list",setup(l){const z=n([{title:"序号",width:50,dataIndex:"seq"},{title:"表名",dataIndex:"tableName"},{title:"备注",dataIndex:"tableComment",ellipsis:!0},{title:"代码配置",dataIndex:"configTime",width:150},{title:"表创建时间",dataIndex:"createTime",width:150},{title:"表修改时间",dataIndex:"updateTime",width:150},{title:"操作",dataIndex:"action",fixed:"right",width:210}]),S={configKey:"",pageNum:1,pageSize:10,tableNameKeywords:void 0},C=d({...S}),k=n(!1),I=n([]),N=n(0);function q(){Object.assign(C,S),T()}function O(){C.pageNum=1,T()}async function T(){try{k.value=!0;let t=await e.queryTableList(C);const a=t.data.list;N.value=t.data.total,I.value=a}catch(t){a.captureError(t)}finally{k.value=!1}}const P=n();const K=n();return u(T),(a,l)=>{const n=m("a-input"),d=m("a-form-item"),u=m("SearchOutlined"),S=m("a-button"),R=m("ReloadOutlined"),U=m("a-button-group"),G=m("a-row"),F=m("a-form"),M=m("a-table"),V=m("a-pagination"),E=m("a-card");return c(),p("div",null,[f(F,{class:"smart-query-form"},{default:g((()=>[f(G,{class:"smart-query-form-row"},{default:g((()=>[f(d,{label:"表名",class:"smart-query-form-item"},{default:g((()=>[f(n,{style:{width:"300px"},value:C.tableNameKeywords,"onUpdate:value":l[0]||(l[0]=e=>C.tableNameKeywords=e),placeholder:"请输入表名关键字"},null,8,["value"])])),_:1}),f(d,{class:"smart-query-form-item smart-margin-left10"},{default:g((()=>[f(U,null,{default:g((()=>[f(S,{type:"primary",onClick:O},{icon:g((()=>[f(u)])),default:g((()=>[j(" 查询 ")])),_:1}),f(S,{onClick:q},{icon:g((()=>[f(R)])),default:g((()=>[j(" 重置 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),f(E,{size:"small",bordered:!1,hoverable:!0},{default:g((()=>[f(G,{justify:"end"},{default:g((()=>[f(r,{class:"smart-margin-bottom5",modelValue:z.value,"onUpdate:modelValue":l[1]||(l[1]=e=>z.value=e),tableId:_(i).SUPPORT.CONFIG,refresh:T},null,8,["modelValue","tableId"])])),_:1}),f(M,{size:"small",scroll:{x:1e3},loading:k.value,bordered:"",dataSource:I.value,columns:z.value,rowKey:"configId",pagination:!1},{bodyCell:g((({record:t,index:a,column:o})=>["seq"===o.dataIndex?(c(),p(y,{key:0},[j(h(a+1),1)],64)):b("",!0),"action"===o.dataIndex?(c(),p("div",w,[f(S,{onClick:e=>{return a=t,void P.value.showModal(a);var a},type:"link"},{default:g((()=>[j("代码配置")])),_:2},1032,["onClick"]),f(S,{onClick:e=>{return a=t,void K.value.showModal(a);var a},type:"link"},{default:g((()=>[j("代码预览")])),_:2},1032,["onClick"]),f(S,{onClick:a=>{return o=t,void e.downloadCode(o.tableName);var o},type:"link"},{default:g((()=>[j("下载代码")])),_:2},1032,["onClick"])])):b("",!0)])),_:1},8,["loading","dataSource","columns"]),v("div",x,[f(V,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:_(t),defaultPageSize:C.pageSize,current:C.pageNum,"onUpdate:current":l[2]||(l[2]=e=>C.pageNum=e),pageSize:C.pageSize,"onUpdate:pageSize":l[3]||(l[3]=e=>C.pageSize=e),total:N.value,onChange:T,onShowSizeChange:T,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])])])),_:1}),f(o,{ref_key:"codeGeneratorTableConfigFormRef",ref:P,onReloadList:T},null,512),f(s,{ref_key:"codeGeneratorPreviewModalRef",ref:K},null,512)])}}});export{z as default};
