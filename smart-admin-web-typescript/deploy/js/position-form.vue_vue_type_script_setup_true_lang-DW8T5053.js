import{_ as e}from"./lodash-2VbGH-WW.js";import{S as a,s as t}from"./index-CBkxY9s9.js";import{p as l}from"./position-api-DKbDvSIj.js";import{b as o}from"./ant-design-vue-CcohkicM.js";import{d as s,r as i,a as r,b2 as n,ag as d,o as u,bz as m,c as p,u as c,J as f,n as v}from"./@vue-BVvo-xZd.js";const h=s({__name:"position-form",emits:["reloadList"],setup(s,{expose:h,emit:y}){const b=y,_=i(!1);function w(){Object.assign(j,N),_.value=!1}const g=i(),N={positionId:void 0,positionName:void 0,level:void 0,sort:0,remark:void 0};let j=r({...N});const k={positionName:[{required:!0,message:"请输入职务名称"}]};async function C(){try{await g.value.validateFields(),async function(){a.show();try{j.positionId?await l.update(j):await l.add(j),o.success("操作成功"),b("reloadList"),w()}catch(e){t.captureError(e)}finally{a.hide()}}()}catch(e){o.error("参数验证错误，请仔细填写表单数据!")}}return h({show:function(a){Object.assign(j,N),a&&!e.isEmpty(a)&&Object.assign(j,a),_.value=!0,v((()=>{g.value.clearValidate();const e=document.getElementsByClassName("ant-modal");e&&e.length>0&&Array.from(e).forEach((e=>{e.childNodes&&e.childNodes.length>0&&Array.from(e.childNodes).forEach((e=>{e.setAttribute&&e.setAttribute("aria-hidden","false")}))}))}))}}),(e,a)=>{const t=n("a-input"),l=n("a-form-item"),o=n("a-input-number"),s=n("a-form"),i=n("a-button"),r=n("a-space"),v=n("a-modal");return u(),d(v,{title:c(j).positionId?"编辑":"添加",width:"600px",open:_.value,onCancel:w,maskClosable:!1,destroyOnClose:!0,forceRender:""},{footer:m((()=>[p(r,null,{default:m((()=>[p(i,{onClick:w},{default:m((()=>[f("取消")])),_:1}),p(i,{type:"primary",onClick:C},{default:m((()=>[f("保存")])),_:1})])),_:1})])),default:m((()=>[p(s,{ref_key:"formRef",ref:g,model:c(j),rules:k,"label-col":{span:6}},{default:m((()=>[p(l,{label:"职务名称",name:"positionName"},{default:m((()=>[p(t,{style:{width:"100%"},value:c(j).positionName,"onUpdate:value":a[0]||(a[0]=e=>c(j).positionName=e),placeholder:"职务名称"},null,8,["value"])])),_:1}),p(l,{label:"职级",name:"level"},{default:m((()=>[p(t,{style:{width:"100%"},value:c(j).level,"onUpdate:value":a[1]||(a[1]=e=>c(j).level=e),placeholder:"职级"},null,8,["value"])])),_:1}),p(l,{label:"排序",name:"sort"},{default:m((()=>[p(o,{min:0,step:1,precision:0,style:{width:"100%"},value:c(j).sort,"onUpdate:value":a[2]||(a[2]=e=>c(j).sort=e),placeholder:"排序"},null,8,["value"])])),_:1}),p(l,{label:"备注",name:"remark"},{default:m((()=>[p(t,{style:{width:"100%"},value:c(j).remark,"onUpdate:value":a[3]||(a[3]=e=>c(j).remark=e),placeholder:"备注"},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","open"])}}});export{h as _};
