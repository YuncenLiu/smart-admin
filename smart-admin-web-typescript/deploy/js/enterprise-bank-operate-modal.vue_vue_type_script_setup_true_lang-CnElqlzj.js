import{b as e,p as a,S as l,s as n}from"./index-CBkxY9s9.js";import{b as t}from"./ant-design-vue-CcohkicM.js";import{d as u,r as s,a as r,b2 as o,ag as c,o as d,u as i,bz as m,c as b}from"./@vue-BVvo-xZd.js";const p={create:e=>a("/oa/bank/create",e),delete:a=>e(`/oa/bank/delete/${a}`),detail:a=>e(`/oa/bank/get/${a}`),pageQuery:e=>a("/oa/bank/page/query",e),update:e=>a("/oa/bank/update",e),queryList:a=>e(`/oa/bank/query/list/${a}`)},k=u({__name:"enterprise-bank-operate-modal",props:{enterpriseId:{type:Number,default:null}},emits:["reloadList"],setup(e,{expose:a,emit:u}){const k=e,v=u,f=s(!1);function g(){Object.assign(_,N),h.value.resetFields(),f.value=!1}const h=s(),N={bankId:void 0,enterpriseId:void 0,bankName:"",accountName:"",accountNumber:"",businessFlag:!1,disabledFlag:!1,remark:""};let _=r({...N});const y={bankName:[{required:!0,message:"请输入开户银行"}],accountName:[{required:!0,message:"请输入账户名称"}],accountNumber:[{required:!0,message:"请输入账号"}]},F=s(!1),I=s(!0);function w(e){_.businessFlag=e}function j(e){_.disabledFlag=!e}function q(){h.value.validate().then((async()=>{l.show();try{_.bankId?await p.update(_):await p.create(_),t.success((_.bankId?"修改":"添加")+"成功"),v("reloadList"),g()}catch(e){n.captureError(e)}finally{l.hide()}})).catch((e=>{t.error("参数验证错误，请仔细填写表单数据!")}))}return a({showModal:function(e){Object.assign(_,N),e&&(Object.assign(_,e),F.value=e.businessFlag,I.value=!e.disabledFlag),_.enterpriseId=k.enterpriseId,f.value=!0}}),(e,a)=>{const l=o("a-input"),n=o("a-form-item"),t=o("a-switch"),u=o("a-textarea"),s=o("a-form"),r=o("a-modal");return d(),c(r,{open:f.value,title:i(_).bankId?"编辑":"添加","ok-text":"确认","cancel-text":"取消",onOk:q,onCancel:g},{default:m((()=>[b(s,{ref_key:"formRef",ref:h,model:i(_),rules:y,"label-col":{span:5},"wrapper-col":{span:18}},{default:m((()=>[b(n,{label:"开户银行",name:"bankName"},{default:m((()=>[b(l,{value:i(_).bankName,"onUpdate:value":a[0]||(a[0]=e=>i(_).bankName=e),placeholder:"请输入开户银行"},null,8,["value"])])),_:1}),b(n,{label:"账户名称",name:"accountName"},{default:m((()=>[b(l,{value:i(_).accountName,"onUpdate:value":a[1]||(a[1]=e=>i(_).accountName=e),placeholder:"请输入账户名称"},null,8,["value"])])),_:1}),b(n,{label:"账号",name:"accountNumber"},{default:m((()=>[b(l,{value:i(_).accountNumber,"onUpdate:value":a[2]||(a[2]=e=>i(_).accountNumber=e),placeholder:"请输入账号"},null,8,["value"])])),_:1}),b(n,{label:"是否对公",name:"businessFlag"},{default:m((()=>[b(t,{checked:F.value,"onUpdate:checked":a[3]||(a[3]=e=>F.value=e),onChange:w},null,8,["checked"])])),_:1}),b(n,{label:"启用状态",name:"disabledFlag"},{default:m((()=>[b(t,{checked:I.value,"onUpdate:checked":a[4]||(a[4]=e=>I.value=e),onChange:j},null,8,["checked"])])),_:1}),b(n,{label:"备注",name:"remark"},{default:m((()=>[b(u,{value:i(_).remark,"onUpdate:value":a[5]||(a[5]=e=>i(_).remark=e),rows:2},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["open","title"])}}});export{k as _,p as b};
