import{S as e,s as a}from"./index-CBkxY9s9.js";import{_ as t}from"./lodash-2VbGH-WW.js";import{c as o}from"./category-api-iaRaCfKr.js";import{b as r}from"./ant-design-vue-CcohkicM.js";import{d as s,r as l,a as c,b2 as n,ag as d,o as i,u as m,bz as u,c as p,n as g}from"./@vue-BVvo-xZd.js";const y=s({__name:"category-form-modal",emits:["reloadList"],setup(s,{expose:y,emit:f}){const h=f,v=l(),b=l(!1);function N(){Object.assign(I,j),b.value=!1}const j={categoryId:void 0,categoryName:"",categoryType:1,parentId:void 0,disabledFlag:!1};let I=c({...j});const _={categoryName:[{required:!0,message:"请输入分类名称"}]};function w(){v.value.validate().then((async()=>{e.show();try{I.categoryId?await o.updateCategory(I):await o.addCategory(I),r.success((I.categoryId?"修改":"添加")+"成功"),h("reloadList",I.parentId),N()}catch(t){a.captureError(t)}finally{e.hide()}})).catch((e=>{r.error("参数验证错误，请仔细填写表单数据!")}))}return y({showModal:function(e,a,o){Object.assign(I,j),I.categoryType=e,I.parentId=a,o&&!t.isEmpty(o)&&Object.assign(I,o),b.value=!0,g((()=>{const e=document.getElementsByClassName("ant-modal");e&&e.length>0&&Array.from(e).forEach((e=>{e.childNodes&&e.childNodes.length>0&&Array.from(e.childNodes).forEach((e=>{e.setAttribute&&e.setAttribute("aria-hidden","false")}))}))}))}}),(e,a)=>{const t=n("a-input"),o=n("a-form-item"),r=n("a-form"),s=n("a-modal");return i(),d(s,{open:b.value,title:m(I).categoryId?"编辑":"添加","ok-text":"确认","cancel-text":"取消",onOk:w,onCancel:N},{default:u((()=>[p(r,{ref_key:"formRef",ref:v,model:m(I),rules:_,"label-col":{span:5},"wrapper-col":{span:12}},{default:u((()=>[p(o,{label:"分类名称",name:"categoryName"},{default:u((()=>[p(t,{value:m(I).categoryName,"onUpdate:value":a[0]||(a[0]=e=>m(I).categoryName=e),placeholder:"请输入分类名称"},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["open","title"])}}});export{y as _};
