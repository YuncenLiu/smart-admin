import{m as e}from"./ant-design-vue-CcohkicM.js";import{S as a,t,s as l}from"./index-CBkxY9s9.js";import{_ as r}from"./help-doc-catalog-tree-select.vue_vue_type_script_setup_true_lang-BLyeRJ10.js";import{d as o,r as n,a as s,b2 as u,ag as d,o as i,u as c,bz as p,c as m,ah as f}from"./@vue-BVvo-xZd.js";const v=o({__name:"help-doc-catalog-form-modal",emits:["refresh"],setup(o,{expose:v,emit:h}){v({showModal:function(e){_.value=!0,function(e){Object.assign(j,w),e&&Object.assign(j,e);_.value=!0}(e)}});const g=h,_=n(!1);function y(){_.value=!1,Object.assign(j,w)}const I=n(),b=n(),w={helpDocCatalogId:void 0,name:void 0,parentId:void 0,sort:0};n();let j=s({...w});const C={parentId:[{required:!0,message:"上级目录不能为空"}],name:[{required:!0,message:"目录名称不能为空"},{max:50,message:"目录名称不能大于20个字符",trigger:"blur"}]};async function D(){try{await I.value.validate(),j.helpDocCatalogId?async function(){a.show();try{if(j.parentId===j.helpDocCatalogId)return void e.warning("上级菜单不能为自己");await t.update(j),g("refresh"),y()}catch(r){l.captureError(r)}finally{a.hide()}}():async function(){a.show();try{await t.add(j),g("refresh"),y()}catch(e){l.captureError(e)}finally{a.hide()}}()}catch(r){e.error("参数验证错误，请仔细填写表单数据!")}}return(e,a)=>{const t=u("a-form-item"),l=u("a-input"),o=u("a-input-number"),n=u("a-form"),s=u("a-modal");return i(),d(s,{open:_.value,"onUpdate:open":a[3]||(a[3]=e=>_.value=e),title:c(j).helpDocCatalogId?"编辑目录":"添加目录",onOk:D,destroyOnClose:""},{default:p((()=>[m(n,{ref_key:"formRef",ref:I,model:c(j),rules:C,layout:"vertical"},{default:p((()=>[0!==c(j).parentId?(i(),d(t,{key:0,label:"上级目录",name:"parentId"},{default:p((()=>[m(r,{ref_key:"helpDocCatalogTreeSelect",ref:b,value:c(j).parentId,"onUpdate:value":a[0]||(a[0]=e=>c(j).parentId=e),defaultValueFlag:!1,width:"100%"},null,8,["value"])])),_:1})):f("",!0),m(t,{label:"目录名称",name:"name"},{default:p((()=>[m(l,{value:c(j).name,"onUpdate:value":a[1]||(a[1]=e=>c(j).name=e),valueModifiers:{trim:!0},placeholder:"请输入目录名称"},null,8,["value"])])),_:1}),m(t,{label:"目录排序 （值越小越靠前！）",name:"sort"},{default:p((()=>[m(o,{style:{width:"100%"},value:c(j).sort,"onUpdate:value":a[2]||(a[2]=e=>c(j).sort=e),min:0,placeholder:"请输入目录名称"},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["open","title"])}}});export{v as _};
