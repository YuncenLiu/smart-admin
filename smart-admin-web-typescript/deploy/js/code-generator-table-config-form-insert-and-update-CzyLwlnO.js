import{d as e,i as t,r as a,a as n,m as l,b2 as r,b as o,o as d,c as s,ag as u,ah as i,bz as p,y as m,J as c,u as f,be as g,E as y,ai as v,F as h,b0 as _,aY as j,aW as b}from"./@vue-BVvo-xZd.js";import{h as x,d as F}from"./code-generator-util-DVWycRGX.js";import{m as U,n as I,a as k}from"./index-CBkxY9s9.js";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang-D394UfoC.js";import{b as A}from"./ant-design-vue-CcohkicM.js";import"./str-util-DvlP_5eO.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./lodash-2VbGH-WW.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./dayjs-B6vKC6dp.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const L=e=>(j("data-v-0395621f"),e=e(),b(),e),C={class:"form-preview"},P=L((()=>v("div",{class:"gutter-box"},"字段",-1))),S=L((()=>v("div",{class:"gutter-box"},"字段",-1))),T=L((()=>v("div",{class:"gutter-box"},"字段",-1))),N={key:1},q=L((()=>v("br",null,null,-1))),E=k(e({__name:"code-generator-table-config-form-insert-and-update",setup(e,{expose:j}){t("tableInfo");const b=a(),k={isSupportInsertAndUpdate:!0,pageType:U.MODAL.value,width:void 0,countPerLine:1},L=n({...k}),E={isSupportInsertAndUpdate:[{required:!0,message:"请输入 是否允许增加、删除"}],pageType:[{required:!0,message:"请输入 页面方式"}],width:[{required:!0,message:"请输入 宽度"}],countPerLine:[{required:!0,message:"请输入 每行数量"}]},D=l((()=>parseInt(20/L.countPerLine))),O=a([{title:"列名",dataIndex:"columnName",width:120,ellipsis:!0},{title:"列描述",dataIndex:"columnComment",width:120,ellipsis:!0},{title:"列类型",dataIndex:"dataType",width:100,ellipsis:!0},{title:"非空",dataIndex:"nullableFlag",width:60},{title:"必填",dataIndex:"required",width:35},{title:"新增",dataIndex:"insertFlag",width:35},{title:"更新",dataIndex:"updateFlag",width:35},{title:"前端组件",dataIndex:"frontComponent",width:100}]),M=a([]);function R(e,t){if(!e)return null;let a=e.filter((e=>e.columnName===t));return a&&a.length>0?a[0]:null}return j({setData:function(e,t){t.insertAndUpdate&&(L.isSupportInsertAndUpdate=t.insertAndUpdate.isSupportInsertAndUpdate,L.pageType=t.insertAndUpdate.pageType,L.width=t.insertAndUpdate.width,L.countPerLine=t.insertAndUpdate.countPerLine);let a=t.insertAndUpdate&&t.insertAndUpdate.fieldList?t.insertAndUpdate.fieldList:null,n=[];for(let l of e){let e=R(a,l.columnName),t={columnName:l.columnName,columnComment:l.columnComment,dataType:l.dataType,nullableFlag:"NO"===l.isNullable,primaryKeyFlag:"PRI"===l.columnKey,autoIncreaseFlag:"auto_increment"===l.extra};t.requiredFlag=e?e.requiredFlag:t.nullableFlag,t.insertFlag=e?e.insertFlag:t.nullableFlag,t.updateFlag=!!e&&e.updateFlag,e&&e.frontComponent?t.frontComponent=e.frontComponent:t.frontComponent=F(l.columnComment)?I.ENUM_SELECT.value:x(l.dataType),n.push(t)}M.value=n},getFieldsForm:function(){let e=M.value.map((e=>({columnName:e.columnName,requiredFlag:e.requiredFlag,insertFlag:e.insertFlag,updateFlag:e.updateFlag,frontComponent:e.frontComponent})));return{isSupportInsertAndUpdate:L.isSupportInsertAndUpdate,pageType:L.pageType,width:L.width,countPerLine:L.countPerLine,fieldList:e}},validateForm:function(){return new Promise(((e,t)=>{b.value.validate().then((()=>{e(!0)})).catch((e=>{A.error(" 请检查【3.增加、修改】表单，有参数验证错误"),t(e)}))}))}}),(e,t)=>{const a=r("a-radio-button"),n=r("a-radio-group"),l=r("a-form-item"),j=r("a-input"),x=r("a-input-number"),F=r("a-form"),I=r("a-col"),k=r("a-row"),A=r("a-tag"),R=r("a-checkbox"),z=r("a-table");return d(),o(h,null,[s(k,{class:"smart-margin-top10"},{default:p((()=>[s(I,{flex:"350px"},{default:p((()=>[s(F,{ref_key:"formRef",ref:b,model:L,style:{width:"350px"},rules:E,"label-col":{span:5},"wrapper-col":{span:16}},{default:p((()=>[s(l,{label:"是否支持",name:"isSupportInsertAndUpdate"},{default:p((()=>[s(n,{value:L.isSupportInsertAndUpdate,"onUpdate:value":t[0]||(t[0]=e=>L.isSupportInsertAndUpdate=e),"button-style":"solid"},{default:p((()=>[s(a,{value:!0},{default:p((()=>[c("支持")])),_:1}),s(a,{value:!1},{default:p((()=>[c("不支持添加、修改")])),_:1})])),_:1},8,["value"])])),_:1}),L.isSupportInsertAndUpdate?(d(),u(l,{key:0,label:"页面方式",name:"pageType"},{default:p((()=>[s(n,{value:L.pageType,"onUpdate:value":t[1]||(t[1]=e=>L.pageType=e),"button-style":"solid"},{default:p((()=>[s(a,{value:f(U).MODAL.value},{default:p((()=>[c(g(f(U).MODAL.desc),1)])),_:1},8,["value"]),s(a,{value:f(U).DRAWER.value},{default:p((()=>[c(g(f(U).DRAWER.desc),1)])),_:1},8,["value"])])),_:1},8,["value"])])),_:1})):i("",!0),L.isSupportInsertAndUpdate?m((d(),u(l,{key:1,label:"页面宽度",name:"width"},{default:p((()=>[s(j,{value:L.width,"onUpdate:value":t[2]||(t[2]=e=>L.width=e),placeholder:"Modal或者Drawer的width属性 "},null,8,["value"])])),_:1},512)),[[y,L.pageType!==f(U).PAGE.value]]):i("",!0),L.isSupportInsertAndUpdate?(d(),u(l,{key:2,label:"每行数量",name:"countPerLine"},{default:p((()=>[s(x,{style:{width:"100%"},max:24,value:L.countPerLine,"onUpdate:value":t[3]||(t[3]=e=>L.countPerLine=e),placeholder:"请输入 每行数量 "},null,8,["value"])])),_:1})):i("",!0)])),_:1},8,["model"])])),_:1}),L.isSupportInsertAndUpdate?(d(),u(I,{key:0,flex:"auto",style:{height:"auto",width:"500px"}},{default:p((()=>[v("div",C,[s(k,{gutter:20,justify:"space-around"},{default:p((()=>[(d(!0),o(h,null,_(L.countPerLine,(e=>(d(),u(I,{class:"form-item",span:D.value,key:e},{default:p((()=>[P])),_:2},1032,["span"])))),128))])),_:1}),s(k,{gutter:20,class:"smart-margin-top10",justify:"space-around"},{default:p((()=>[(d(!0),o(h,null,_(L.countPerLine,(e=>(d(),u(I,{class:"form-item",span:D.value,key:e},{default:p((()=>[S])),_:2},1032,["span"])))),128))])),_:1}),s(k,{gutter:20,class:"smart-margin-top10",justify:"space-around"},{default:p((()=>[(d(!0),o(h,null,_(L.countPerLine,(e=>(d(),u(I,{class:"form-item",span:D.value,key:e},{default:p((()=>[T])),_:2},1032,["span"])))),128))])),_:1})])])),_:1})):i("",!0)])),_:1}),L.isSupportInsertAndUpdate?(d(),u(z,{key:0,size:"small",scroll:{x:1e3},bordered:"",class:"smart-margin-top10",dataSource:M.value,columns:O.value,rowKey:"columnName",pagination:!1},{bodyCell:p((({text:e,record:t,index:a,column:n})=>["no"===n.dataIndex?(d(),o(h,{key:0},[c(g(a+1),1)],64)):i("",!0),"columnName"===n.dataIndex?(d(),o("span",N,[t.primaryKeyFlag?(d(),u(A,{key:0,color:"#f50",style:{"line-height":"12px"}},{default:p((()=>[c("主键")])),_:1})):i("",!0),t.autoIncreaseFlag?(d(),u(A,{key:1,color:"#f50",style:{"line-height":"12px"}},{default:p((()=>[c("自增")])),_:1})):i("",!0),q,c(" "+g(e),1)])):i("",!0),"nullableFlag"===n.dataIndex?(d(),o(h,{key:2},[e?(d(),u(A,{key:0,color:"error"},{default:p((()=>[c("非空")])),_:1})):i("",!0)],64)):i("",!0),"required"===n.dataIndex?(d(),u(R,{key:3,checked:t.requiredFlag,"onUpdate:checked":e=>t.requiredFlag=e},null,8,["checked","onUpdate:checked"])):i("",!0),"insertFlag"===n.dataIndex?(d(),u(R,{key:4,checked:t.insertFlag,"onUpdate:checked":e=>t.insertFlag=e},null,8,["checked","onUpdate:checked"])):i("",!0),"updateFlag"===n.dataIndex?(d(),u(R,{key:5,checked:t.updateFlag,"onUpdate:checked":e=>t.updateFlag=e},null,8,["checked","onUpdate:checked"])):i("",!0),"frontComponent"===n.dataIndex?(d(),u(w,{key:6,width:"100%","enum-name":"CODE_FRONT_COMPONENT_ENUM",value:t.frontComponent,"onUpdate:value":e=>t.frontComponent=e},null,8,["value","onUpdate:value"])):i("",!0)])),_:1},8,["dataSource","columns"])):i("",!0)],64)}}}),[["__scopeId","data-v-0395621f"]]);export{E as default};
