import{_ as e}from"./lodash-2VbGH-WW.js";import{r as t}from"./role-api-CQ_zWWSq.js";import{S as s,s as a,a as o}from"./index-CBkxY9s9.js";import r from"./index-D7ZNPVcb.js";import{M as l,b as i}from"./ant-design-vue-CcohkicM.js";import{d as n,r as m,e as p,m as d,b2 as c,z as u,b as j,o as y,F as f,c as v,bz as x,u as b,K as _,b0 as g,ag as h,J as k,be as C,ai as w,y as I}from"./@vue-BVvo-xZd.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./dayjs-B6vKC6dp.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const z={style:{display:"flex","flex-direction":"column"}},E=o(n({__name:"index",setup(o,{expose:n}){const E=m([]);async function K(){let s=await t.queryAll();E.value=s.data,!e.isEmpty(s.data)&&s.data[0].roleId&&(M.value=[s.data[0].roleId])}p(K);let M=m([]);const R=d((()=>!M.value&&e.isEmpty(M.value)?null:M.value[0])),T=m();function F(e){T.value.showModal(e)}return n({selectRoleId:R}),(e,o)=>{const n=c("a-button"),m=c("a-popover"),p=c("a-menu-item"),d=c("a-menu"),R=c("a-card"),q=u("privilege");return y(),j(f,null,[v(R,{title:"角色列表",class:"role-container",style:{padding:"0"}},{extra:x((()=>[I((y(),h(n,{type:"primary",size:"small",onClick:F},{default:x((()=>[k("添加")])),_:1})),[[q,"system:role:add"]])])),default:x((()=>[v(d,{mode:"vertical",selectedKeys:b(M),"onUpdate:selectedKeys":o[0]||(o[0]=e=>_(M)?M.value=e:M=e)},{default:x((()=>[(y(!0),j(f,null,g(E.value,(e=>(y(),h(p,{key:e.roleId},{default:x((()=>[v(m,{placement:"right"},{content:x((()=>[w("div",z,[I((y(),h(n,{type:"text",onClick:o=>{var r;(r=e.roleId)&&l.confirm({title:"提示",content:"确定要删除该角色么？",okText:"确定",okType:"danger",async onOk(){s.show();try{await t.deleteRole(r),i.info("删除成功"),K()}catch(e){a.captureError(e)}finally{s.hide()}},cancelText:"取消",onCancel(){}})}},{default:x((()=>[k("删除")])),_:2},1032,["onClick"])),[[q,"system:role:delete"]]),I((y(),h(n,{type:"text",onClick:t=>F(e)},{default:x((()=>[k("编辑")])),_:2},1032,["onClick"])),[[q,"system:role:update"]])])])),default:x((()=>[k(" "+C(e.roleName),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["selectedKeys"])])),_:1}),v(r,{ref_key:"roleFormModal",ref:T,onRefresh:K},null,512)],64)}}}),[["__scopeId","data-v-20c41c84"]]);export{E as default};
