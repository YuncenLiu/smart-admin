import{_ as t}from"./do-reload-form-modal.vue_vue_type_script_setup_true_lang-CqsK0gmi.js";import{_ as e}from"./reload-result-list.vue_vue_type_script_setup_true_lang-BCoSiL0e.js";import{r as a}from"./reload-api-CFTcznxZ.js";import{s as r}from"./index-CBkxY9s9.js";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang-CtW6JKpO.js";import{T as s}from"./table-id-const-DES3cCFe.js";import{d as i,r as l,e as n,b2 as d,z as m,ag as u,o as p,bz as c,c as j,ai as v,u as _,b as f,ah as y,y as g,J as b}from"./@vue-BVvo-xZd.js";import"./ant-design-vue-CcohkicM.js";import"./@babel-rSvM8Ko2.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./dayjs-B6vKC6dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./lodash-2VbGH-WW.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";import"./sortablejs-CRp0PNdb.js";const h=v("h4",null,"Smart-Reload 心跳服务介绍：",-1),x=v("pre",null,"简介：SmartReload是一个可以在不重启进程的情况下动态重新加载配置或者执行某些预先设置的代码。\n\n原理：\n- Java后端会在项目启动的时候开启一个Daemon线程，这个Daemon线程会每隔几秒轮询t_smart_item表的状态。\n- 如果【状态标识】与【上次状态标识】比较发生变化，会将参数传入SmartReload实现类，进行自定义操作。\n用途：\n· 用于刷新内存中的缓存\n· 用于执行某些后门代码\n· 用于进行Java热加载（前提是类结构不发生变化）\n· 其他不能重启服务的应用\n",-1),w={key:0,class:"smart-table-operate"},k=i({__name:"reload-list",setup(i){const v=l([{title:"标签",dataIndex:"tag",width:200},{title:"运行标识",dataIndex:"identification"},{title:"参数",dataIndex:"args"},{title:"更新时间",dataIndex:"updateTime",width:150},{title:"创建时间",dataIndex:"createTime",width:150},{title:"操作",dataIndex:"action",fixed:"right",width:150}]),k=l(!1),I=l([]);async function R(){try{k.value=!0;let t=await a.queryList();I.value=t.data}catch(t){r.captureError(t)}finally{k.value=!1}}n(R);const z=l();const C=l();return(a,r)=>{const i=d("a-alert"),l=d("a-row"),n=d("a-button"),S=d("a-table"),D=d("a-card"),T=m("privilege");return p(),u(D,{size:"small",bordered:!1,hoverable:!0},{default:c((()=>[j(i,null,{message:c((()=>[h])),description:c((()=>[x])),_:1}),j(l,{justify:"end"},{default:c((()=>[j(o,{class:"smart-margin-bottom5 smart-margin-top5",modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=t=>v.value=t),tableId:_(s).SUPPORT.RELOAD,refresh:R},null,8,["modelValue","tableId"])])),_:1}),j(S,{size:"small",bordered:"",class:"smart-margin-top10",dataSource:I.value,loading:k.value,columns:v.value,rowKey:"tag",pagination:!1},{bodyCell:c((({record:t,column:e})=>["action"===e.dataIndex?(p(),f("div",w,[g((p(),u(n,{onClick:e=>{return a=t.tag,void z.value.showModal(a);var a},type:"link"},{default:c((()=>[b("执行")])),_:2},1032,["onClick"])),[[T,"support:reload:execute"]]),g((p(),u(n,{onClick:e=>{return a=t.tag,void C.value.showModal(a);var a},type:"link"},{default:c((()=>[b("查看结果")])),_:2},1032,["onClick"])),[[T,"support:reload:result"]])])):y("",!0)])),_:1},8,["dataSource","loading","columns"]),j(t,{onRefresh:R,ref_key:"doReloadForm",ref:z},null,512),j(e,{ref_key:"reloadResultList",ref:C},null,512)])),_:1})}}});export{k as default};
