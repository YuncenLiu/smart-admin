import{_ as e,b as a}from"./enterprise-bank-operate-modal.vue_vue_type_script_setup_true_lang-CnElqlzj.js";import{c as t,P as l,s,S as r}from"./index-CBkxY9s9.js";import{_ as n}from"./index.vue_vue_type_script_setup_true_lang-CtW6JKpO.js";import{T as i}from"./table-id-const-DES3cCFe.js";import{M as o,b as d}from"./ant-design-vue-CcohkicM.js";import{d as u,r as c,a as p,w as m,b2 as f,b as g,o as b,F as y,c as _,bz as h,u as v,K as I,J as k,ai as w,ah as S,be as x}from"./@vue-BVvo-xZd.js";const z={key:2,class:"smart-table-operate"},C={class:"smart-query-table-page"},N=u({__name:"enterprise-bank-list",props:{enterpriseId:{type:Number,default:null}},setup(u){const N=u,T=c([{title:"开户银行",dataIndex:"bankName"},{title:"账户名称",dataIndex:"accountName",ellipsis:!0},{title:"账号",width:100,dataIndex:"accountNumber",ellipsis:!0},{title:"是否对公",width:120,dataIndex:"businessFlag"},{title:"状态",width:80,dataIndex:"disabledFlag"},{title:"备注",width:100,dataIndex:"remark"},{title:"创建人",width:100,dataIndex:"createUserName"},{title:"创建时间",dataIndex:"createTime",width:150},{title:"操作",dataIndex:"action",fixed:"right",width:100}]),O={enterpriseId:N.enterpriseId,keywords:"",endTime:null,startTime:null,pageNum:1,pageSize:t,searchCount:!0},j=p({...O}),F=c(!1),U=c([]),q=c(0),E=c();let P=c();function R(e,a){j.startTime=a[0],j.endTime=a[1]}function K(){P.value=[],Object.assign(j,O,{enterpriseId:N.enterpriseId}),V()}function M(){j.pageNum=1,V()}async function V(){try{F.value=!0;let e=await a.pageQuery(j);const t=e.data.list;q.value=e.data.total,U.value=t}catch(e){s.captureError(e)}finally{F.value=!1}}function A(e){o.confirm({title:"确定要删除吗？",content:"删除后，该信息将不可恢复",okText:"删除",okType:"danger",onOk(){!async function(e){try{r.show(),await a.delete(e),d.success("删除成功"),V()}catch(t){s.captureError(t)}finally{r.hide()}}(e)},cancelText:"取消",onCancel(){}})}function B(e){E.value.showModal(e)}return m((()=>N.enterpriseId),(e=>{e&&(j.enterpriseId=e,V())}),{immediate:!0}),(a,t)=>{const s=f("a-input"),r=f("a-form-item"),o=f("a-range-picker"),d=f("a-space"),c=f("SearchOutlined"),p=f("a-button"),m=f("ReloadOutlined"),N=f("a-button-group"),O=f("PlusOutlined"),F=f("a-row"),J=f("a-form"),Q=f("a-table"),L=f("a-pagination"),$=f("a-card");return b(),g(y,null,[_(J,{class:"smart-query-form"},{default:h((()=>[_(F,{class:"smart-query-form-row"},{default:h((()=>[_(r,{label:"关键字",class:"smart-query-form-item"},{default:h((()=>[_(s,{style:{width:"300px"},value:j.keywords,"onUpdate:value":t[0]||(t[0]=e=>j.keywords=e),placeholder:"开户银行/账户名称/账户/创建人"},null,8,["value"])])),_:1}),_(r,{label:"创建时间",class:"smart-query-form-item"},{default:h((()=>[_(d,{direction:"vertical",size:12},{default:h((()=>[_(o,{value:v(P),"onUpdate:value":t[1]||(t[1]=e=>I(P)?P.value=e:P=e),onChange:R},null,8,["value"])])),_:1})])),_:1}),_(r,{class:"smart-query-form-item smart-margin-left10"},{default:h((()=>[_(N,null,{default:h((()=>[_(p,{type:"primary",onClick:M},{icon:h((()=>[_(c)])),default:h((()=>[k(" 查询 ")])),_:1}),_(p,{onClick:K},{icon:h((()=>[_(m)])),default:h((()=>[k(" 重置 ")])),_:1})])),_:1}),_(p,{onClick:t[2]||(t[2]=e=>B()),type:"primary",class:"smart-margin-left20"},{icon:h((()=>[_(O)])),default:h((()=>[k(" 新建账户 ")])),_:1})])),_:1})])),_:1})])),_:1}),_($,{size:"small",bordered:!1,hoverable:!1},{default:h((()=>[_(F,{justify:"end"},{default:h((()=>[_(n,{class:"smart-margin-bottom5",modelValue:T.value,"onUpdate:modelValue":t[3]||(t[3]=e=>T.value=e),tableId:v(i).BUSINESS.OA.ENTERPRISE_BANK,refresh:V},null,8,["modelValue","tableId"])])),_:1}),_(Q,{scroll:{x:1300},size:"small",dataSource:U.value,bordered:"",columns:T.value,rowKey:"bankId",pagination:!1},{bodyCell:h((({record:e,column:a})=>["disabledFlag"===a.dataIndex?(b(),g(y,{key:0},[k(x(e.disabledFlag?"禁用":"启用"),1)],64)):"businessFlag"===a.dataIndex?(b(),g(y,{key:1},[k(x(e.businessFlag?"是":"否"),1)],64)):"action"===a.dataIndex?(b(),g("div",z,[_(p,{onClick:a=>B(e),type:"link"},{default:h((()=>[k("编辑")])),_:2},1032,["onClick"]),_(p,{onClick:a=>A(e.bankId),danger:"",type:"link"},{default:h((()=>[k("删除")])),_:2},1032,["onClick"])])):S("",!0)])),_:1},8,["dataSource","columns"]),w("div",C,[_(L,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:v(l),defaultPageSize:j.pageSize,current:j.pageNum,"onUpdate:current":t[4]||(t[4]=e=>j.pageNum=e),pageSize:j.pageSize,"onUpdate:pageSize":t[5]||(t[5]=e=>j.pageSize=e),total:q.value,onChange:V,onShowSizeChange:V,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])]),_(e,{ref_key:"operateModal",ref:E,enterpriseId:u.enterpriseId,onReloadList:V},null,8,["enterpriseId"])])),_:1})],64)}}});export{N as _};
