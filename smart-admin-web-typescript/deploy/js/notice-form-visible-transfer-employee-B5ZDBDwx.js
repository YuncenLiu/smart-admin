import{_ as e}from"./lodash-2VbGH-WW.js";import{N as t,e as a,s,a as i}from"./index-CBkxY9s9.js";import{d as l}from"./department-api-Dth9G_6l.js";import{d as r,r as o,m as n,w as d,e as p,b2 as m,b as c,o as u,ai as v,c as y,bz as j,aP as f,ag as E,ah as h,J as b,u as k,be as I,F as g,b0 as w,n as T}from"./@vue-BVvo-xZd.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./ant-design-vue-CcohkicM.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./dayjs-B6vKC6dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";const C={class:"wrapper"},L={class:"sider-left"},x={class:"list-item-title"},P={class:"sider-right"},_={class:"selected-list"},M={class:"list-item-title"},N=i(r({__name:"notice-form-visible-transfer-employee",props:{employeeList:{type:Array,default:()=>[]}},emits:["onChange"],setup(i,{emit:r}){const N=i,O=r,Y=o([]);async function z(){try{const t=await l.queryDepartmentTree(),s=await a.queryAll(),i=t.data;A(i,s.data),e.isEmpty(i)||(Y.value=i,T((()=>{D.value=[Y.value[0].key]})))}catch(t){s.captureError(t)}}function A(e,a){for(const s of e){if(s.dataType&&s.dataType===t.EMPLOYEE.value)continue;s.id=s.departmentId,s.key="department_"+s.departmentId,s.dataType=t.DEPARTMENT.value;let e=a.filter((e=>e.departmentId===s.departmentId)).map((e=>Object.assign({},{id:e.employeeId,key:"employee_"+e.employeeId,name:e.actualName,dataType:t.EMPLOYEE.value})));s.children||(s.children=[]),s.children.push(...e),A(s.children,a)}}const D=o([]);const K=o([]),q=n((()=>K.value.map((e=>e.dataId))));function F(e){return q.value.includes(e)}function J(){O("onChange",{selectedList:K.value,selectedIds:q.value})}return d((()=>N.employeeList),(e=>{K.value=e}),{immediate:!0}),p((()=>{z()})),(e,a)=>{const s=m("caret-down-outlined"),i=m("user-outlined"),l=m("check-circle-filled"),r=m("a-tree"),o=m("close-circle-two-tone");return u(),c("div",C,[v("div",L,[y(r,{"tree-data":Y.value,fieldNames:{title:"name"},selectable:!1,expandedKeys:D.value,"onUpdate:expandedKeys":a[0]||(a[0]=e=>D.value=e)},{switcherIcon:j((({switcherCls:e})=>[y(s,{class:f(e)},null,8,["class"])])),title:j((({name:e,id:a,dataType:s})=>[v("div",{class:f(["list-item",{active:F(a)}])},[v("div",x,[s===k(t).EMPLOYEE.value?(u(),E(i,{key:0})):h("",!0),b(" "+I(e),1)]),s===k(t).EMPLOYEE.value?(u(),E(l,{key:0,class:"check-icon-style",onClick:s=>function(e,a,s){F(a)||(K.value.push({dataName:e,dataId:a,dataType:t.EMPLOYEE.value}),J())}(e,a)},null,8,["onClick"])):h("",!0)],2)])),_:1},8,["tree-data","expandedKeys"])]),v("div",P,[v("div",_,[(u(!0),c(g,null,w(K.value,((e,t)=>(u(),c("div",{class:"list-item",key:e.id},[v("div",M,I(e.dataName),1),y(o,{onClick:e=>function(e){K.value.splice(e,1),J()}(t)},null,8,["onClick"])])))),128))])])])}}}),[["__scopeId","data-v-e686ce47"]]);export{N as default};
