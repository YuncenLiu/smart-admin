import{_ as e,i as a}from"./enterprise-invoice-operate-modal.vue_vue_type_script_setup_true_lang-qcvmyMKI.js";import{c as t,P as l,s as i,S as n}from"./index-CBkxY9s9.js";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang-CtW6JKpO.js";import{T as s}from"./table-id-const-DES3cCFe.js";import{M as o,b as d}from"./ant-design-vue-CcohkicM.js";import{d as u,r as c,a as p,w as m,b2 as f,b as g,o as v,F as y,c as _,bz as h,u as I,K as b,J as w,ai as x,ah as k,be as S}from"./@vue-BVvo-xZd.js";const z={key:1,class:"smart-table-operate"},C={class:"smart-query-table-page"},N=u({__name:"enterprise-invoice-list",props:{enterpriseId:{type:Number,default:null}},setup(u){const N=u,T=c([{title:"ID",width:50,dataIndex:"invoiceId"},{title:"开票抬头",dataIndex:"invoiceHeads",ellipsis:!0},{title:"纳税人识别号",dataIndex:"taxpayerIdentificationNumber",ellipsis:!0},{title:"银行账号",width:100,dataIndex:"accountNumber",ellipsis:!0},{title:"开户行",width:120,dataIndex:"bankName"},{title:"状态",width:80,dataIndex:"disabledFlag"},{title:"备注",width:100,dataIndex:"remark"},{title:"创建人",width:100,dataIndex:"createUserName"},{title:"创建时间",dataIndex:"createTime",width:150},{title:"操作",dataIndex:"action",fixed:"right",width:100}]),O={enterpriseId:N.enterpriseId,keywords:"",endTime:null,startTime:null,pageNum:1,pageSize:t,searchCount:!0},j=p({...O}),E=c(!1),U=c([]),q=c(0),P=c();let F=c();function R(e,a){j.startTime=a[0],j.endTime=a[1]}function V(){F.value=[],Object.assign(j,O),J()}function M(){j.pageNum=1,J()}async function J(){try{E.value=!0;let e=await a.pageQuery(j);const t=e.data.list;q.value=e.data.total,U.value=t}catch(e){i.captureError(e)}finally{E.value=!1}}function K(e){o.confirm({title:"确定要删除吗？",content:"删除后，该信息将不可恢复",okText:"删除",okType:"danger",onOk(){!async function(e){try{n.show(),await a.delete(e),d.success("删除成功"),J()}catch(t){i.captureError(t)}finally{n.hide()}}(e)},cancelText:"取消",onCancel(){}})}function Q(e){P.value.showModal(e)}return m((()=>N.enterpriseId),(e=>{e&&(j.enterpriseId=e,J())}),{immediate:!0}),(a,t)=>{const i=f("a-input"),n=f("a-form-item"),o=f("a-range-picker"),d=f("a-space"),c=f("SearchOutlined"),p=f("a-button"),m=f("ReloadOutlined"),N=f("a-button-group"),O=f("PlusOutlined"),E=f("a-row"),A=f("a-form"),B=f("a-table"),D=f("a-pagination"),H=f("a-card");return v(),g(y,null,[_(A,{class:"smart-query-form"},{default:h((()=>[_(E,{class:"smart-query-form-row"},{default:h((()=>[_(n,{label:"关键字",class:"smart-query-form-item"},{default:h((()=>[_(i,{style:{width:"300px"},value:j.keywords,"onUpdate:value":t[0]||(t[0]=e=>j.keywords=e),placeholder:"开票抬头/银行账户/创建人"},null,8,["value"])])),_:1}),_(n,{label:"创建时间",class:"smart-query-form-item"},{default:h((()=>[_(d,{direction:"vertical",size:12},{default:h((()=>[_(o,{value:I(F),"onUpdate:value":t[1]||(t[1]=e=>b(F)?F.value=e:F=e),onChange:R},null,8,["value"])])),_:1})])),_:1}),_(n,{class:"smart-query-form-item smart-margin-left10"},{default:h((()=>[_(N,null,{default:h((()=>[_(p,{type:"primary",onClick:M},{icon:h((()=>[_(c)])),default:h((()=>[w(" 查询 ")])),_:1}),_(p,{onClick:V},{icon:h((()=>[_(m)])),default:h((()=>[w(" 重置 ")])),_:1})])),_:1}),_(p,{onClick:t[2]||(t[2]=e=>Q()),type:"primary",class:"smart-margin-left20"},{icon:h((()=>[_(O)])),default:h((()=>[w(" 新建发票 ")])),_:1})])),_:1})])),_:1})])),_:1}),_(H,{size:"small",bordered:!1,hoverable:!1},{default:h((()=>[_(E,{justify:"end"},{default:h((()=>[_(r,{class:"smart-margin-bottom5",modelValue:T.value,"onUpdate:modelValue":t[3]||(t[3]=e=>T.value=e),tableId:I(s).BUSINESS.OA.ENTERPRISE_INVOICE,refresh:J},null,8,["modelValue","tableId"])])),_:1}),_(B,{scroll:{x:1300},size:"small",dataSource:U.value,columns:T.value,rowKey:"invoiceId",pagination:!1,bordered:""},{bodyCell:h((({text:e,record:a,index:t,column:l})=>["disabledFlag"===l.dataIndex?(v(),g(y,{key:0},[w(S(a.disabledFlag?"禁用":"启用"),1)],64)):"action"===l.dataIndex?(v(),g("div",z,[_(p,{onClick:e=>Q(a),type:"link"},{default:h((()=>[w("编辑")])),_:2},1032,["onClick"]),_(p,{onClick:e=>K(a.invoiceId),type:"link",danger:""},{default:h((()=>[w("删除")])),_:2},1032,["onClick"])])):k("",!0)])),_:1},8,["dataSource","columns"]),x("div",C,[_(D,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:I(l),defaultPageSize:j.pageSize,current:j.pageNum,"onUpdate:current":t[4]||(t[4]=e=>j.pageNum=e),pageSize:j.pageSize,"onUpdate:pageSize":t[5]||(t[5]=e=>j.pageSize=e),total:q.value,onChange:J,onShowSizeChange:J,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])]),_(e,{ref_key:"operateModal",ref:P,enterpriseId:u.enterpriseId,onReloadList:J},null,8,["enterpriseId"])])),_:1})],64)}}});export{N as _};
