import{s as a}from"./serial-number-api-9iSys_DQ.js";import{s as e,P as t}from"./index-CBkxY9s9.js";import{d as o,r as s,a as l,b2 as n,ag as r,o as i,bz as u,c as d,ai as c,ah as p,J as g,be as m,u as S}from"./@vue-BVvo-xZd.js";const z={class:"smart-query-table-page"},h=o({__name:"serial-number-record-list",setup(o,{expose:h}){h({showModal:function(a){v.serialNumberId=a,v.pageNum=1,v.pageSize=10,N(),b.value=!0}});const b=s(!1);function f(){b.value=!1}const I=l([{title:"单号ID",dataIndex:"serialNumberId",width:70},{title:"日期",dataIndex:"recordDate"},{title:"生成数量",dataIndex:"count"},{title:"最后更新值",dataIndex:"lastNumber"},{title:"上次生成时间",dataIndex:"lastTime"}]),v=l({serialNumberId:-1,pageNum:1,pageSize:10}),w=s(!1),x=s([]),y=s(0);async function N(){try{w.value=!0;let e=await a.queryRecord(v);const t=e.data.list;y.value=e.data.total,x.value=t}catch(t){e.captureError(t)}finally{w.value=!1}}return(a,e)=>{const o=n("a-tag"),s=n("a-button"),l=n("a-table"),h=n("a-pagination"),w=n("a-modal");return i(),r(w,{open:b.value,title:"每日生成结果记录",width:"60%",footer:null,onCancel:f},{default:u((()=>[d(l,{size:"small",dataSource:x.value,columns:I,bordered:"",pagination:!1},{bodyCell:u((({text:e,record:t,column:l})=>["successFlag"===l.dataIndex?(i(),r(o,{key:0,color:e?"success":"error"},{default:u((()=>[g(m(e?"成功":"失败"),1)])),_:2},1032,["color"])):"action"===l.dataIndex?(i(),r(s,{key:1,onClick:e=>a.showDetail(t.operateLogId),type:"link"},{default:u((()=>[g("详情")])),_:2},1032,["onClick"])):p("",!0)])),_:1},8,["dataSource","columns"]),c("div",z,[d(h,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:S(t),defaultPageSize:v.pageSize,current:v.pageNum,"onUpdate:current":e[0]||(e[0]=a=>v.pageNum=a),pageSize:v.pageSize,"onUpdate:pageSize":e[1]||(e[1]=a=>v.pageSize=a),total:y.value,onChange:N,onShowSizeChange:N,"show-total":a=>`共${a}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])])])),_:1},8,["open"])}}});export{h as _};
