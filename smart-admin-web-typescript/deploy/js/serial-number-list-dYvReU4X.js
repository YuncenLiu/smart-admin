import{_ as e}from"./serial-number-generate-form-modal.vue_vue_type_script_setup_true_lang-BwtEVsRq.js";import{_ as t}from"./serial-number-record-list.vue_vue_type_script_setup_true_lang-mbYam1i0.js";import{s as r}from"./serial-number-api-9iSys_DQ.js";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang-CtW6JKpO.js";import{T as s}from"./table-id-const-DES3cCFe.js";import{s as i}from"./index-CBkxY9s9.js";import{d as l,r as o,e as n,b2 as m,z as u,b as d,o as p,c,bz as j,ai as b,u as v,ah as _,y as f,ag as y,J as g,F as x}from"./@vue-BVvo-xZd.js";import"./lodash-2VbGH-WW.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./ant-design-vue-CcohkicM.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./dayjs-B6vKC6dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./sortablejs-CRp0PNdb.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";const I=b("h4",null,"SerialNumber 单号生成器介绍：",-1),h=b("pre",null,"简介：SerialNumber是一个可以根据不同的日期、规则生成一系列特别单号的功能，比如订单号、合同号、采购单号等等。\n原理：内部有三种实现方式： 1) 基于内存锁实现 （不支持分布式和集群）；  2) 基于redis锁实现 ；  3) 基于Mysql 锁for update 实现\n- 支持随机生成和查询生成记录\n- 支持动态配置\n",-1),N=b("div",{style:{color:"red"}},"系统默认使用“内存锁”类型，若修改，请将后端代码 @Service 注解加到对应的实现类上：SerialNumberInternService、SerialNumberMysqlService、SerialNumberRedisService",-1),S={key:0,class:"smart-table-operate"},k=l({__name:"serial-number-list",setup(l){const b=o([{title:"ID",dataIndex:"serialNumberId"},{title:"业务",dataIndex:"businessName"},{title:"格式",dataIndex:"format"},{title:"循环周期",dataIndex:"ruleType"},{title:"初始值",dataIndex:"initNumber"},{title:"随机增量",dataIndex:"stepRandomRange"},{title:"备注",dataIndex:"remark"},{title:"上次产生单号",dataIndex:"lastNumber"},{title:"上次产生时间",dataIndex:"lastTime"},{title:"操作",dataIndex:"action",fixed:"right",width:140}]),k=o(!1),w=o([]);async function z(){try{k.value=!0;let e=await r.getAll();w.value=e.data}catch(e){i.captureError(e)}finally{k.value=!1}}n(z);const R=o();const C=o();return(r,i)=>{const l=m("a-alert"),o=m("a-row"),n=m("a-button"),M=m("a-table"),E=m("a-card"),T=u("privilege");return p(),d(x,null,[c(E,{size:"small",bordered:!1,hoverable:!0},{default:j((()=>[c(l,null,{message:j((()=>[I])),description:j((()=>[h,N])),_:1}),c(o,{justify:"end"},{default:j((()=>[c(a,{class:"smart-margin-bottom5 smart-margin-top5",modelValue:b.value,"onUpdate:modelValue":i[0]||(i[0]=e=>b.value=e),tableId:v(s).SUPPORT.SERIAL_NUMBER,refresh:z},null,8,["modelValue","tableId"])])),_:1}),c(M,{size:"small",loading:k.value,bordered:"",class:"smart-margin-top10",dataSource:w.value,columns:b.value,rowKey:"tag",pagination:!1},{bodyCell:j((({record:e,column:t})=>["action"===t.dataIndex?(p(),d("div",S,[f((p(),y(n,{onClick:t=>function(e){R.value.showModal(e)}(e),type:"link"},{default:j((()=>[g("生成")])),_:2},1032,["onClick"])),[[T,"support:serialNumber:generate"]]),f((p(),y(n,{onClick:t=>{return r=e.serialNumberId,void C.value.showModal(r);var r},type:"link"},{default:j((()=>[g("查看记录")])),_:2},1032,["onClick"])),[[T,"support:serialNumber:record"]])])):_("",!0)])),_:1},8,["loading","dataSource","columns"])])),_:1}),c(e,{ref_key:"generateForm",ref:R,onRefresh:z},null,512),c(t,{ref_key:"recordList",ref:C},null,512)],64)}}});export{k as default};
