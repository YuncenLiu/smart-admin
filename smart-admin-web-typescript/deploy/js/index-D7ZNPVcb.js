import{r as e}from"./role-api-CQ_zWWSq.js";import{S as o,s as a,a as t}from"./index-CBkxY9s9.js";import{b as r}from"./ant-design-vue-CcohkicM.js";import{d as s,r as l,a as i,b2 as m,ag as d,o as n,bz as p,c as u,ai as j,u as c,J as f}from"./@vue-BVvo-xZd.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./lodash-2VbGH-WW.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./dayjs-B6vKC6dp.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const v={class:"footer"},h=t(s({__name:"index",emits:["refresh"],setup(t,{expose:s,emit:h}){let y=h;s({showModal:function(e){Object.assign(C,w),e&&Object.assign(C,e);b.value=!0}});const b=l(!1);function g(){Object.assign(C,w),b.value=!1}const _=l(),w={roleId:void 0,remark:void 0,roleCode:void 0,roleName:void 0};let C=i({...w});const x={roleName:[{required:!0,message:"请输入角色名称"}],roleCode:[{required:!0,message:"请输入角色编码"}]};async function k(){_.value.validate().then((async()=>{o.show();try{C.roleId?await e.updateRole(C):await e.addRole(C),r.info((C.roleId?"编辑":"添加")+"成功"),y("refresh"),g()}catch(t){a.captureError(t)}finally{o.hide()}})).catch((e=>{r.error("参数验证错误，请仔细填写表单数据!")}))}return(e,o)=>{const a=m("a-input"),t=m("a-form-item"),r=m("a-form"),s=m("a-button"),l=m("a-modal");return n(),d(l,{title:c(C).roleId?"编辑角色":"添加角色",width:600,open:b.value,onCancel:g,footer:null},{default:p((()=>[u(r,{ref_key:"formRef",ref:_,model:c(C),rules:x,labelCol:{span:4}},{default:p((()=>[u(t,{label:"角色名称",name:"roleName"},{default:p((()=>[u(a,{style:{width:"100%"},placeholder:"请输入角色名称",value:c(C).roleName,"onUpdate:value":o[0]||(o[0]=e=>c(C).roleName=e)},null,8,["value"])])),_:1}),u(t,{label:"角色编码",name:"roleCode"},{default:p((()=>[u(a,{style:{width:"100%"},placeholder:"请输入角色编码",value:c(C).roleCode,"onUpdate:value":o[1]||(o[1]=e=>c(C).roleCode=e)},null,8,["value"])])),_:1}),u(t,{label:"角色备注"},{default:p((()=>[u(a,{style:{width:"100%"},placeholder:"请输入角色备注",value:c(C).remark,"onUpdate:value":o[2]||(o[2]=e=>c(C).remark=e)},null,8,["value"])])),_:1})])),_:1},8,["model"]),j("div",v,[u(s,{style:{"margin-right":"8px"},onClick:g},{default:p((()=>[f("取消")])),_:1}),u(s,{type:"primary",onClick:k},{default:p((()=>[f("提交")])),_:1})])])),_:1},8,["title","open"])}}}),[["__scopeId","data-v-16471b1e"]]);export{h as default};
