import{r as a}from"./reload-api-CFTcznxZ.js";import{s as e}from"./index-CBkxY9s9.js";import{d as t,r as o,a as l,b2 as s,ag as r,o as n,bz as d,c as i,J as c,ai as u,be as p,ah as m}from"./@vue-BVvo-xZd.js";const f={style:{margin:"0","font-size":"12px"}},x=t({__name:"reload-result-list",setup(t,{expose:x}){x({showModal:function(a){b=a,I(),y.value=!0}});const y=o(!1);function v(){y.value=!1}let b="";const _=o(!1),g=o([]);async function I(){try{_.value=!0;let e=await a.queryReloadResult(b),t=1;for(const a of e.data)a.id=t++;g.value=e.data}catch(t){e.captureError(t)}finally{_.value=!1}}const w=l([{title:"标签",dataIndex:"tag"},{title:"参数",dataIndex:"args"},{title:"运行结果",dataIndex:"result"},{title:"异常",dataIndex:"exception",ellipsis:!0},{title:"创建时间",dataIndex:"createTime"}]);return(a,e)=>{const t=s("ReloadOutlined"),o=s("a-button"),l=s("a-tag"),x=s("a-table"),b=s("a-modal");return n(),r(b,{open:y.value,title:"reload结果列表",width:"60%",footer:null,onCancel:v},{default:d((()=>[i(o,{type:"primary",onClick:I,size:"small"},{icon:d((()=>[i(t)])),default:d((()=>[c(" 刷新 ")])),_:1}),i(x,{scroll:{y:350},size:"small",bordered:"",rowKey:"id",class:"smart-margin-top10",dataSource:g.value,columns:w},{bodyCell:d((({text:a,column:e})=>["result"===e.dataIndex?(n(),r(l,{key:0,color:a?"success":"error"},{default:d((()=>[c(p(a?"成功":"失败"),1)])),_:2},1032,["color"])):m("",!0)])),expandedRowRender:d((({record:a})=>[u("pre",f,"          "+p(a.exception)+"\n        ",1)])),_:1},8,["dataSource","columns"])])),_:1},8,["open"])}}});export{x as _};
