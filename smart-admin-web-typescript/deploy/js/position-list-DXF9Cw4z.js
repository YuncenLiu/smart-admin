import{P as e,s as t,S as a}from"./index-CBkxY9s9.js";import{p as s}from"./position-api-DKbDvSIj.js";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang-CtW6JKpO.js";import{_ as i}from"./position-form.vue_vue_type_script_setup_true_lang-DW8T5053.js";import{_ as l}from"./lodash-2VbGH-WW.js";import{T as r}from"./table-id-const-DES3cCFe.js";import{M as n,b as u}from"./ant-design-vue-CcohkicM.js";import{d as p,r as c,a as d,e as m,b2 as f,b as y,o as g,c as j,bz as v,J as b,ai as h,u as _,ah as k,F as w}from"./@vue-BVvo-xZd.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./dayjs-B6vKC6dp.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./sortablejs-CRp0PNdb.js";const S={class:"smart-table-operate-block"},z={class:"smart-table-setting-block"},x={key:0,class:"smart-table-operate"},C={class:"smart-query-table-page"},I=p({__name:"position-list",setup(p){const I=c([{title:"职务名称",dataIndex:"positionName",ellipsis:!0},{title:"职级",dataIndex:"level",ellipsis:!0},{title:"排序",dataIndex:"sort",ellipsis:!0},{title:"备注",dataIndex:"remark",ellipsis:!0},{title:"创建时间",dataIndex:"createTime",ellipsis:!0},{title:"操作",dataIndex:"action",fixed:"right",width:90}]),O={keywords:void 0,pageNum:1,pageSize:10},E=d({...O}),T=c(!1),q=c([]),P=c(0);function N(){let e=E.pageSize;Object.assign(E,O),E.pageSize=e,M()}async function M(){T.value=!0;try{let e=await s.queryPage(E);q.value=e.data.list,P.value=e.data.total}catch(e){t.captureError(e)}finally{T.value=!1}}m(M);const R=c();function U(e){R.value.show(e)}function D(e){n.confirm({title:"提示",content:"确定要删除选吗?",okText:"删除",okType:"danger",onOk(){!async function(e){a.show();try{await s.delete(e.positionId),u.success("删除成功"),M()}catch(o){t.captureError(o)}finally{a.hide()}}(e)},cancelText:"取消",onCancel(){}})}const V=c([]);function J(e){V.value=e}function K(){l.isEmpty(V.value)?u.success("请选择要删除的数据"):n.confirm({title:"提示",content:"确定要批量删除这些数据吗?",okText:"删除",okType:"danger",onOk(){!async function(){try{a.show(),await s.batchDelete(V.value),u.success("删除成功"),M()}catch(e){t.captureError(e)}finally{a.hide()}}()},cancelText:"取消",onCancel(){}})}return(t,a)=>{const s=f("a-input"),l=f("a-form-item"),n=f("SearchOutlined"),u=f("a-button"),p=f("ReloadOutlined"),c=f("a-row"),d=f("a-form"),m=f("PlusOutlined"),O=f("DeleteOutlined"),L=f("a-table"),Y=f("a-pagination"),A=f("a-card");return g(),y(w,null,[j(d,{class:"smart-query-form"},{default:v((()=>[j(c,{class:"smart-query-form-row"},{default:v((()=>[j(l,{label:"关键字查询",class:"smart-query-form-item"},{default:v((()=>[j(s,{style:{width:"200px"},value:E.keywords,"onUpdate:value":a[0]||(a[0]=e=>E.keywords=e),placeholder:"关键字查询"},null,8,["value"])])),_:1}),j(l,{class:"smart-query-form-item"},{default:v((()=>[j(u,{type:"primary",onClick:M},{icon:v((()=>[j(n)])),default:v((()=>[b(" 查询 ")])),_:1}),j(u,{onClick:N,class:"smart-margin-left10"},{icon:v((()=>[j(p)])),default:v((()=>[b(" 重置 ")])),_:1})])),_:1})])),_:1})])),_:1}),j(A,{size:"small",bordered:!1,hoverable:!0},{default:v((()=>[j(c,{class:"smart-table-btn-block"},{default:v((()=>[h("div",S,[j(u,{onClick:U,type:"primary"},{icon:v((()=>[j(m)])),default:v((()=>[b(" 新建 ")])),_:1}),j(u,{onClick:K,type:"primary",danger:"",disabled:0===V.value.length},{icon:v((()=>[j(O)])),default:v((()=>[b(" 批量删除 ")])),_:1},8,["disabled"])]),h("div",z,[j(o,{modelValue:I.value,"onUpdate:modelValue":a[1]||(a[1]=e=>I.value=e),tableId:_(r).SYSTEM.EMPLOYEE,refresh:M},null,8,["modelValue","tableId"])])])),_:1}),j(L,{size:"small",dataSource:q.value,columns:I.value,rowKey:"positionId",bordered:"",loading:T.value,pagination:!1,"row-selection":{selectedRowKeys:V.value,onChange:J}},{bodyCell:v((({text:e,record:t,column:a})=>["action"===a.dataIndex?(g(),y("div",x,[j(u,{onClick:e=>U(t),type:"link"},{default:v((()=>[b("编辑")])),_:2},1032,["onClick"]),j(u,{onClick:e=>D(t),danger:"",type:"link"},{default:v((()=>[b("删除")])),_:2},1032,["onClick"])])):k("",!0)])),_:1},8,["dataSource","columns","loading","row-selection"]),h("div",C,[j(Y,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:_(e),defaultPageSize:E.pageSize,current:E.pageNum,"onUpdate:current":a[2]||(a[2]=e=>E.pageNum=e),pageSize:E.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>E.pageSize=e),total:P.value,onChange:M,onShowSizeChange:M,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])]),j(i,{ref_key:"formRef",ref:R,onReloadList:M},null,512)])),_:1})],64)}}});export{I as default};
