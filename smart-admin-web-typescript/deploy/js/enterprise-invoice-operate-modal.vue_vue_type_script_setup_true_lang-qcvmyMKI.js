import{b as e,p as a,S as t,s as l}from"./index-CBkxY9s9.js";import{b as n}from"./ant-design-vue-CcohkicM.js";import{d as i,r,a as o,b2 as u,ag as s,o as d,u as c,bz as m,c as p}from"./@vue-BVvo-xZd.js";const v={create:e=>a("/oa/invoice/create",e),delete:a=>e(`/oa/invoice/delete/${a}`),detail:a=>e(`//oa/invoice/get/${a}`),pageQuery:e=>a("/oa/invoice/page/query",e),update:e=>a("/oa/invoice/update",e),queryList:a=>e(`/oa/invoice/query/list/${a}`)},b=i({__name:"enterprise-invoice-operate-modal",props:{enterpriseId:{type:Number,default:null}},emits:["reloadList"],setup(e,{expose:a,emit:i}){const b=e,f=i,g=r(!1),N=r(!0);function h(e){_.disabledFlag=!e}function k(){y.value.resetFields(),Object.assign(_,I),g.value=!1}const y=r(),I={invoiceId:void 0,enterpriseId:void 0,bankName:"",accountNumber:"",invoiceHeads:"",taxpayerIdentificationNumber:"",disabledFlag:!1,remark:""};let _=o({...I});const x={invoiceHeads:[{required:!0,message:"请输入开票抬头"}],taxpayerIdentificationNumber:[{required:!0,message:"请输入纳税人识别号"}],accountNumber:[{required:!0,message:"请输入银行账号"}],bankName:[{required:!0,message:"请输入开户行"}]};function q(){y.value.validate().then((async()=>{t.show();try{_.invoiceId?await v.update(_):await v.create(_),n.success((_.invoiceId?"修改":"添加")+"成功"),f("reloadList"),k()}catch(e){l.captureError(e)}finally{t.hide()}})).catch((e=>{n.error("参数验证错误，请仔细填写表单数据!")}))}return a({showModal:function(e){Object.assign(_,I),e&&(Object.assign(_,e),N.value=!e.disabledFlag),_.enterpriseId=b.enterpriseId,g.value=!0}}),(e,a)=>{const t=u("a-input"),l=u("a-form-item"),n=u("a-switch"),i=u("a-textarea"),r=u("a-form"),o=u("a-modal");return d(),s(o,{open:g.value,title:c(_).invoiceId?"编辑":"添加","ok-text":"确认","cancel-text":"取消",onOk:q,onCancel:k},{default:m((()=>[p(r,{ref_key:"formRef",ref:y,model:c(_),rules:x,"label-col":{span:5},"wrapper-col":{span:12}},{default:m((()=>[p(l,{label:"开票抬头",name:"invoiceHeads"},{default:m((()=>[p(t,{value:c(_).invoiceHeads,"onUpdate:value":a[0]||(a[0]=e=>c(_).invoiceHeads=e),placeholder:"请输入开票抬头"},null,8,["value"])])),_:1}),p(l,{label:"纳税人识别号",name:"taxpayerIdentificationNumber"},{default:m((()=>[p(t,{value:c(_).taxpayerIdentificationNumber,"onUpdate:value":a[1]||(a[1]=e=>c(_).taxpayerIdentificationNumber=e),placeholder:"请输入纳税人识别号"},null,8,["value"])])),_:1}),p(l,{label:"银行账号",name:"accountNumber"},{default:m((()=>[p(t,{value:c(_).accountNumber,"onUpdate:value":a[2]||(a[2]=e=>c(_).accountNumber=e),placeholder:"请输入银行账号"},null,8,["value"])])),_:1}),p(l,{label:"开户行",name:"bankName"},{default:m((()=>[p(t,{value:c(_).bankName,"onUpdate:value":a[3]||(a[3]=e=>c(_).bankName=e),placeholder:"请输入开户行"},null,8,["value"])])),_:1}),p(l,{label:"启用状态",name:"disabledFlag"},{default:m((()=>[p(n,{checked:N.value,"onUpdate:checked":a[4]||(a[4]=e=>N.value=e),onChange:h},null,8,["checked"])])),_:1}),p(l,{label:"备注",name:"remark"},{default:m((()=>[p(i,{value:c(_).remark,"onUpdate:value":a[5]||(a[5]=e=>c(_).remark=e),rows:2},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["open","title"])}}});export{b as _,v as i};
