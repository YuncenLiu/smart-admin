import{s as e}from"./serial-number-api-9iSys_DQ.js";import{S as a,s as l}from"./index-CBkxY9s9.js";import{_ as u}from"./lodash-2VbGH-WW.js";import{b as s}from"./ant-design-vue-CcohkicM.js";import{d as t,r,a as o,b2 as n,ag as m,o as d,bz as i,c as f}from"./@vue-BVvo-xZd.js";const b=t({__name:"serial-number-generate-form-modal",emits:["refresh"],setup(t,{expose:b,emit:v}){const c=v;b({showModal:function(e){j.serialNumberId=e.serialNumberId,j.businessName=e.businessName,j.format=e.format,j.ruleType=e.ruleType,j.lastNumber=e.lastNumber,j.count=1,y.value="",p.value=!0}});const p=r(!1);function N(){p.value=!1,c("refresh")}const _={count:[{required:!0,message:"请输入数量"}]},y=r(""),h=r(),j=o({serialNumberId:-1,businessName:"",format:"",ruleType:"",lastNumber:-1,count:1});function x(){h.value.validate().then((async()=>{a.show();try{let a=await e.generate(j);s.success("生成成功"),y.value=u.join(a.data,", ")}catch(t){l.captureError(t)}finally{a.hide()}})).catch((e=>{s.error("参数验证错误，请仔细填写表单数据!")}))}return(e,a)=>{const l=n("a-input"),u=n("a-form-item"),s=n("a-input-number"),t=n("a-textarea"),r=n("a-form"),o=n("a-modal");return d(),m(o,{open:p.value,title:"生成单号","ok-text":"生成","cancel-text":"关闭",onOk:x,onCancel:N},{default:i((()=>[f(r,{ref_key:"formRef",ref:h,model:j,rules:_,"label-col":{span:5}},{default:i((()=>[f(u,{label:"业务"},{default:i((()=>[f(l,{value:j.businessName,"onUpdate:value":a[0]||(a[0]=e=>j.businessName=e),disabled:!0},null,8,["value"])])),_:1}),f(u,{label:"格式"},{default:i((()=>[f(l,{value:j.format,"onUpdate:value":a[1]||(a[1]=e=>j.format=e),disabled:!0},null,8,["value"])])),_:1}),f(u,{label:"循环周期"},{default:i((()=>[f(l,{value:j.ruleType,"onUpdate:value":a[2]||(a[2]=e=>j.ruleType=e),disabled:!0},null,8,["value"])])),_:1}),f(u,{label:"上次产生单号"},{default:i((()=>[f(l,{value:j.lastNumber,"onUpdate:value":a[3]||(a[3]=e=>j.lastNumber=e),disabled:!0},null,8,["value"])])),_:1}),f(u,{label:"生成数量",name:"count"},{default:i((()=>[f(s,{value:j.count,"onUpdate:value":a[4]||(a[4]=e=>j.count=e)},null,8,["value"])])),_:1}),f(u,{label:"生成结果"},{default:i((()=>[f(t,{value:y.value,"onUpdate:value":a[5]||(a[5]=e=>y.value=e),rows:2},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["open"])}}});export{b as _};
