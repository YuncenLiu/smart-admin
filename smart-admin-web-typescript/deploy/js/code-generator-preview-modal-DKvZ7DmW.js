import{c as e}from"./code-generator-api-C59wnQS_.js";import{L as t,J as a,T as n,a as l}from"./code-generator-util-DVWycRGX.js";import{s as r,a as s}from"./index-CBkxY9s9.js";import{H as o,j as i,a as u}from"./highlight.js-D2tfmK9n.js";import{b as c}from"./ant-design-vue-CcohkicM.js";import{d,r as p,m,b2 as v,ag as g,o as f,bz as b,c as j,ai as h,u as y,J as x,b as C,F as w,b0 as L,aP as _,be as T,n as N,aY as F,aW as H}from"./@vue-BVvo-xZd.js";import"./str-util-DvlP_5eO.js";import"./@ant-design-D2dl84QQ.js";import"./vue-Bbq_A2bw.js";import"./@ctrl-DlzbjsCp.js";import"./lodash-2VbGH-WW.js";import"./vue3-json-viewer-DGFKKWPN.js";import"./dayjs-B6vKC6dp.js";import"./vue-i18n-CEbWPeBD.js";import"./@intlify-D18cTrFw.js";import"./pinia-CgN6MZDh.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-TV0Ce7JK.js";import"./sm-crypto-CWaozmhJ.js";import"./jsbn-DBh4-X7k.js";import"./nprogress-CqoNXQnd.js";import"./vue-router-D-yLC68c.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-DXlYAqfy.js";import"./stylis-YutRQeBK.js";import"./vue-types-Sy1fKJ9U.js";import"./dom-align-CCb293uS.js";import"./lodash-es-BgZ_dRTG.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";let M="hljs-ln",E="hljs-ln-line",S="hljs-ln-code",k="hljs-ln-numbers",z="hljs-ln-n",A="data-line-number",J=/\r\n|\r|\n/g;function K(e,t){"object"==typeof e&&(e.innerHTML=function(e,t){let a=function(e,t){return t=t||{},{singleLine:q(t),startFrom:O(e,t)}}(e,t);return P(e),function(e,t){let a=B(e);""===a[a.length-1].trim()&&a.pop();if(a.length>1||t.singleLine){let e="";for(let n=0,l=a.length;n<l;n++)e+=D('<tr><td class="{0} {1}" {3}="{5}"><div class="{2}" {3}="{5}"></div></td><td class="{0} {4}" {3}="{5}">{6}</td></tr>',[E,k,z,A,S,n+t.startFrom,a[n].length>0?a[n]:" "]);return D('<table class="{0}">{1}</table>',[M,e])}return e}(e.innerHTML,a)}(e,t))}function q(e){return!!e.singleLine&&e.singleLine}function O(e,t){let a=1;isFinite(t.startFrom)&&(a=t.startFrom);let n=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):null}(e,"data-ln-start-from");return null!==n&&(a=function(e,t){if(!e)return t;let a=Number(e);return isFinite(a)?a:t}(n,1)),a}function P(e){let t=e.childNodes;for(let a in t)if(t.hasOwnProperty(a)){let e=t[a];(e.textContent.trim().match(J)||[]).length>0&&(e.childNodes.length>0?P(e):U(e.parentNode))}}function U(e){let t=e.className;if(!/hljs-/.test(t))return;let a=B(e.innerHTML);for(var n=0,l="";n<a.length;n++){l+=D('<span class="{0}">{1}</span>\n',[t,a[n].length>0?a[n]:" "])}e.innerHTML=l.trim()}function B(e){return 0===e.length?[]:e.split(J)}function D(e,t){return e.replace(/\{(\d+)\}/g,(function(e,a){return void 0!==t[a]?t[a]:e}))}!function(){let e=document.createElement("style");e.type="text/css",e.innerHTML=D(".{0}{border-collapse:collapse}.{0} td{padding:0}.{1}:before{content:attr({2})}",[M,z,A]),document.getElementsByTagName("head")[0].appendChild(e)}();const I=(e=>(F("data-v-bc0d9bab"),e=e(),H(),e))((()=>h("strong",null,"下载代码",-1))),W=s(d({__name:"code-generator-preview-modal",setup(s,{expose:d}){const F=p(!1);function H(){F.value=!1}const M=p(""),E=p(""),S=p(t[0]),k=m((()=>S.value===t[0]?a:S.value===t[1]?n:l)),z=p(k.value[0]);function A(e){e.target.value===t[0]?z.value=a[0]:e.target.value===t[1]?z.value=n[0]:z.value=l[0],O(z.value)}function J(t){e.downloadCode(M.value)}const q=p("language-javascript");function O(a){let n=a,l=S.value===t[0]?"javascript":S.value===t[1]?"typescript":"java";o.registerLanguage(l,"java"==l?i:u),q.value="language-"+l,N((()=>{!async function(t,a){try{let n=await e.preview({templateFile:t,tableName:a});P.value=n.data,N((()=>{document.querySelectorAll("pre code").forEach((e=>{e.setAttribute("highlighted","true"),o.highlightElement(e),K(e),e.innerHTML="<div><div style='padding: 5px 0px 10px 20px;float:right'><span style='margin-right: 10px;padding: 5px;border: white solid 1px;color:white;border-radius: 2px'>"+e.className.match(/(?<=language-).*(?= hljs)/).toString()+"</span><button class='ant-btn ant-btn-sm' >复制代码</button></div>"+e.innerHTML+"</div>";let t=e.querySelector("button");null!=t&&(t.onclick=function(){!function(e){let t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("Copy"),document.body.removeChild(t)}(P.value),c.success("复制成功！")})}))}))}catch(n){r.captureError(n)}}(n,M.value)}))}const P=p("");return d({showModal:function(e){M.value=e.tableName,E.value=e.tableComment,F.value=!0,N((()=>{O(z.value)}))}}),(e,a)=>{const n=v("a-radio-button"),l=v("a-radio-group"),r=v("a-button"),s=v("a-row"),o=v("a-tab-pane"),i=v("a-tabs"),u=v("a-drawer");return f(),g(u,{title:"代码预览",open:F.value,width:1200,footerStyle:{textAlign:"right"},bodyStyle:{padding:"8px 24px"},onClose:H,maskClosable:!1,destroyOnClose:!0},{default:b((()=>[j(s,{justify:"space-between",class:"smart-margin-bottom10"},{default:b((()=>[j(l,{value:S.value,"onUpdate:value":a[0]||(a[0]=e=>S.value=e),"button-style":"solid",onChange:A},{default:b((()=>[j(n,{value:y(t)[0]},{default:b((()=>[x("JavaScript代码")])),_:1},8,["value"]),j(n,{value:y(t)[1]},{default:b((()=>[x("TypeScript代码")])),_:1},8,["value"]),j(n,{value:y(t)[2]},{default:b((()=>[x("Java代码")])),_:1},8,["value"])])),_:1},8,["value"]),j(r,{type:"link",onClick:J,danger:"",size:"small"},{default:b((()=>[I])),_:1})])),_:1}),j(i,{activeKey:z.value,"onUpdate:activeKey":a[1]||(a[1]=e=>z.value=e),size:"small",onChange:O},{default:b((()=>[(f(!0),C(w,null,L(k.value,(e=>(f(),g(o,{key:e,tab:e},null,8,["tab"])))),128))])),_:1},8,["activeKey"]),h("div",null,[h("pre",null,[h("code",{class:_(q.value)},T(P.value),3)])])])),_:1},8,["open"])}}}),[["__scopeId","data-v-bc0d9bab"]]);export{W as default};
